<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Mantra - Client</title>
  <link rel="stylesheet" href="/mantra.css">
  <script type="module" src="/mantra.js"></script>
  <script type="module" src="/realstone.js"></script>

</head>

<body>
  <script type="text/javascript">





    document.addEventListener('DOMContentLoaded', async (event) => {

      let roverLightSystem = RS.createContraption({
        powerRequired: false
      });

      // Create the buttons
      let button = new RS.Button(-150, -200, 0);
      let button2 = new RS.Button(150, -200, 0);

      // Create the LED lights
      let ledLight1 = new RS.LEDLight(-200, 250, 0);
      let ledLight2 = new RS.LEDLight(0, 250, 0);
      let ledLight3 = new RS.LEDLight(200, 250, 0);

      // Create the Rover
      let redRover = new RS.Rover(0, -200, 0, {
        color: 0xff0000,
        velocity: { x: -20, y: 0 }
      });

      // Create wires for each button
      let wire1 = new RS.Wire();
      let wire2 = new RS.Wire();

      // Connect the first button to the first and second LED lights
      button.connect(wire1);
      wire1.connect(ledLight1);
      wire1.connect(ledLight2);
      wire1.connect(ledLight3);

      // Connect the second button to the third LED light
      button2.connect(wire2);
      //wire2.connect(ledLight1);
      //wire2.connect(ledLight2);
      wire2.connect(ledLight3);

      // Add components to RealStone system
      roverLightSystem.addPart(button);
      roverLightSystem.addPart(button2);
      roverLightSystem.addPart(wire1);
      roverLightSystem.addPart(wire2);
      roverLightSystem.addPart(ledLight1);
      roverLightSystem.addPart(ledLight2);
      roverLightSystem.addPart(ledLight3);
      roverLightSystem.addPart(redRover);

      // Start moving the Rover
      redRover.startMoving();

      //return realStoneSystem;

      let game = new MANTRA.Game({
        physics: 'matter', // enum, 'physx', 'matter
        collisions: true,
        graphics: ['css'], // array enum, 'babylon', 'phaser', 'css', 'three'
        camera: 'follow',
        options: {
          scriptRoot: './'
        }
      });
      game.start();
      game.use('Bullet');
      game.use('RealStone', {
        contraption: roverLightSystem
      });
    });
  </script>
  <!-- <div class="stars"></div> -->
  <!-- <div class="twinkling"></div> -->
  <!-- <div class="clouds"></div> -->

</body>

</html>