!function(t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).WORLDS=t()}(function(){return function o(r,i,a){function u(e,t){if(!i[e]){if(!r[e]){var n="function"==typeof require&&require;if(!t&&n)return n(e,!0);if(c)return c(e,!0);throw(t=new Error("Cannot find module '"+e+"'")).code="MODULE_NOT_FOUND",t}n=i[e]={exports:{}},r[e][0].call(n.exports,function(t){return u(r[e][1][t]||t)},n,n.exports,o,r,i,a)}return i[e].exports}for(var c="function"==typeof require&&require,t=0;t<a.length;t++)u(a[t]);return u}({1:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"Actuator",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(n,"Amplifier",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(n,"Button",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(n,"Craft",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(n,"Display",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(n,"ElectricalSignal",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(n,"LEDLight",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(n,"LaserSensor",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(n,"Latch",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(n,"Mirror",{enumerable:!0,get:function(){return y.default}}),Object.defineProperty(n,"MotionDetector",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(n,"PressureSensor",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(n,"Relay",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(n,"Rover",{enumerable:!0,get:function(){return b.default}}),Object.defineProperty(n,"VirtualMachine",{enumerable:!0,get:function(){return v.default}}),Object.defineProperty(n,"Wire",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(n,"YCraft",{enumerable:!0,get:function(){return o.default}});var o=g(t("./lib/YCraft.js")),r=g(t("./lib/signals/ElectricalSignal.js")),i=g(t("./lib/parts/Actuator.js")),a=g(t("./lib/parts/Amplifier.js")),u=g(t("./lib/parts/Button.js")),c=g(t("./lib/parts/Display.js")),s=g(t("./lib/parts/LaserSensor.js")),l=g(t("./lib/parts/Latch.js")),f=g(t("./lib/parts/LEDLight.js")),y=g(t("./lib/parts/Mirror.js")),d=g(t("./lib/parts/MotionDetector.js")),p=g(t("./lib/parts/PressureSensor.js")),h=g(t("./lib/parts/Relay.js")),b=g(t("./lib/parts/Rover.js")),v=g(t("./lib/parts/VirtualMachine.js")),m=g(t("./lib/parts/Wire.js"));function g(t){return t&&t.__esModule?t:{default:t}}},{"./lib/YCraft.js":3,"./lib/parts/Actuator.js":4,"./lib/parts/Amplifier.js":5,"./lib/parts/Button.js":6,"./lib/parts/Display.js":7,"./lib/parts/LEDLight.js":8,"./lib/parts/LaserSensor.js":9,"./lib/parts/Latch.js":10,"./lib/parts/Mirror.js":11,"./lib/parts/MotionDetector.js":12,"./lib/parts/PressureSensor.js":13,"./lib/parts/Relay.js":14,"./lib/parts/Rover.js":15,"./lib/parts/VirtualMachine.js":16,"./lib/parts/Wire.js":17,"./lib/signals/ElectricalSignal.js":18}],2:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Part=void 0;t=(t=t("./utils/EventEmitter.js"))&&t.__esModule?t:{default:t};function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,a(o.key),o)}}function u(t,e){return(u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function c(n){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=i(n),e=(t=o?(t=i(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),this);if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}function i(t){return(i=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function a(t){t=function(t,e){if("object"!=r(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===e?String:Number)(t);n=n.call(t,e||"default");if("object"!=r(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"==r(t)?t:String(t)}var s,n=n.Part=function(t){var e=a;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t);var n,i=c(a);function a(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,o=this,r=a;if(o instanceof r)return(o=i.call(this)).id=a.idCounter++,o.position={x:t,y:e,z:n},o.size={width:16,height:16,depth:16},o.props={},o;throw new TypeError("Cannot call a class as a function")}return e=a,(t=[{key:"setYCraft",value:function(t){this.yCraft=t}}])&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(t.default);t=n,n=0,(s=a(s="idCounter"))in t?Object.defineProperty(t,s,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[s]=n},{"./utils/EventEmitter.js":19}],3:[function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=(t=t("./utils/EventEmitter.js"))&&t.__esModule?t:{default:t};function i(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,function(t){t=function(t,e){if("object"!=r(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===e?String:Number)(t);n=n.call(t,e||"default");if("object"!=r(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"==r(t)?t:String(t)}(o.key),o)}}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function u(n){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=c(n),e=(t=o?(t=c(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),this);if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}t=function(t){var e=l;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&a(e,t);var n,s=u(l);function l(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},r=o.powerRequired,r=void 0!==r&&r,i=o.height,i=void 0===i?160:i,a=o.width,a=void 0===a?160:a,o=o.description,o=void 0===o?"A YCraft contraption":o,u=this,c=l;if(u instanceof c)return(u=s.call(this)).position={x:t,y:e,z:n},u.height=i,u.width=a,u.description=o,u.powerRequired=r,u.parts=[],u.contraptions=[],u;throw new TypeError("Cannot call a class as a function")}return e=l,(t=[{key:"start",value:function(){0<this.parts.length&&(this.parts[0].onFn?this.parts[0].onFn():console.log("Warning: ".concat(this.parts[0].constructor.name," does not have an onFn method"))),0<this.contraptions.length&&this.contraptions.forEach(function(t){t.start()})}},{key:"stop",value:function(){0<this.parts.length&&(this.parts[0].offFn?this.parts[0].offFn():console.log("Warning: ".concat(this.parts[0].constructor.name," does not have an offFn method")))}},{key:"addContraption",value:function(t){var r=this,e=this.position.x,n=this.position.y,o=this.position.z;t.setPosition(t.position.x+e,t.position.y+n,t.position.z+o),this.contraptions.push(t),t.onAny(function(t){for(var e=arguments.length,n=new Array(1<e?e-1:0),o=1;o<e;o++)n[o-1]=arguments[o];r.emit.apply(r,[t].concat(n))}),"function"==typeof t.setYCraft&&t.setYCraft(this)}},{key:"addPart",value:function(t){var r=this;t.position.x+=this.position.x,t.position.y+=this.position.y,t.position.z+=this.position.z,this.parts.push(t),t instanceof o.default&&(t.onAny(function(t){for(var e=arguments.length,n=new Array(1<e?e-1:0),o=1;o<e;o++)n[o-1]=arguments[o];r.emit.apply(r,[t].concat(n))}),"function"==typeof t.setYCraft)&&t.setYCraft(this)}},{key:"findpart",value:function(e){return this.parts.find(function(t){return t instanceof e})}},{key:"setPowerRequired",value:function(t){this.config.powerRequired=t}},{key:"connect",value:function(t){t instanceof YCraftComponent&&(this.yCraft,t.yCraft)}},{key:"run",value:function(){}},{key:"tick",value:function(){this.parts.forEach(function(t){"function"==typeof t.update&&t.update()})}},{key:"setMode",value:function(t){this.mode=t}},{key:"setPosition",value:function(t,e,n){var o=t-this.position.x,r=e-this.position.y,i=n-this.position.z;this.position.x=t,this.position.y=e,this.position.z=n,this.parts.forEach(function(t){t.position.x+=o,t.position.y+=r,t.position.z+=i})}},{key:"toJSON",value:function(){var e=this;return{powerRequired:this.powerRequired,parts:this.parts.map(function(t){return{type:t.constructor.name,properties:e.getPartProperties(t),connections:e.getPartConnections(t),position:t.position,size:t.size}})}}},{key:"getPartProperties",value:function(t){var e={};if(t.props)for(var n in t.props)e[n]=t.props[n];return e}},{key:"getPartConnections",value:function(t){var e=[];return t.connectedParts&&t.connectedParts.forEach(function(t){e.push({id:t.id,type:t.constructor.name})}),e}}])&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),l}(o.default);n.default=t},{"./utils/EventEmitter.js":19}],4:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;t=t("../Part.js");function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,u(o.key),o)}}function i(t,e){return(i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function c(n){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=a(n),e=(t=o?(t=a(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),this);if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return s(e)}}function s(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t){t=function(t,e){if("object"!=r(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===e?String:Number)(t);n=n.call(t,e||"default");if("object"!=r(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"==r(t)?t:String(t)}var l,n=n.default=function(t){var e=u;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&i(e,t);var n,a=c(u);function u(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,o=(3<arguments.length&&void 0!==arguments[3]?arguments[3]:{}).frequency,o=void 0===o?1e3:o,r=this,i=u;if(r instanceof i)return(r=a.call(this,t,e,n)).type=u.type,r.isActive=!1,r.isOn=!1,r.onFn=r.start.bind(s(r)),r.offFn=r.stop.bind(s(r)),r.timers={pulse:null},r.frequency=o,r.connectedParts=[],r;throw new TypeError("Cannot call a class as a function")}return e=u,(t=[{key:"connect",value:function(t){"Wire"===t.constructor.name&&t.inputs.push(this),this.connectedParts.push(t)}},{key:"receive",value:function(t){console.log("Actuator received signal",t),this.signal=t,this.toggle()}},{key:"toggle",value:function(){this.isOn?(this.stop(),this.emit("stop"),this.isOn=!1):(this.start(),this.emit("start"),this.isOn=!0,this.update())}},{key:"start",value:function(){var t=this;null===this.timers.pulse&&(this.timers.pulse=setInterval(function(){t.update()},this.frequency))}},{key:"stop",value:function(){null!==this.timers.pulse&&(clearInterval(this.timers.pulse),this.timers.pulse=null)}},{key:"update",value:function(){var e=this;this.isOn&&(this.emit("pulse",this.signal),this.connectedParts.forEach(function(t){return t.receive(e.signal)}))}},{key:"unload",value:function(){this.stop()}}])&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),u}(t.Part);t=n,n="Actuator",(l=u(l="type"))in t?Object.defineProperty(t,l,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[l]=n},{"../Part.js":2}],5:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=t("../Part.js"),c=(t=t("../signals/ElectricalSignal.js"))&&t.__esModule?t:{default:t};function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,u(o.key),o)}}function i(t,e){return(i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(n){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=a(n),e=(t=o?(t=a(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),this);if(t&&("object"===s(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return f(e)}}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t){t=function(t,e){if("object"!=s(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===e?String:Number)(t);n=n.call(t,e||"default");if("object"!=s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"==s(t)?t:String(t)}var t=n.default=function(t){var e=u;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&i(e,t);var n,a=l(u);function u(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,o=(3<arguments.length&&void 0!==arguments[3]?arguments[3]:{}).amplitude,o=void 0===o?2:o,r=this,i=u;if(r instanceof i)return"object"===s(t)&&(o=t.amplitude||o,n=t.z||0,e=t.y||0,t=t.x||0),(r=a.call(this,t,e,n)).type=u.type,r.connectedParts=[],r.mode="continuous",r.amplitude=o,r.signal=new c.default,r.outputs=[],r.inputs=[],r.onFn=r.activate.bind(f(r)),r.offFn=r.deactivate.bind(f(r)),r;throw new TypeError("Cannot call a class as a function")}return e=u,(t=[{key:"setYCraft",value:function(t){this.yCraft=t}},{key:"connect",value:function(t){void 0!==t.inputs&&t.inputs.push(this),this.outputs.push(t)}},{key:"activate",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.signal;this.isOn=!0,this.emit("activate",t),this.transmit(t)}},{key:"deactivate",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.signal;this.isOn=!1,this.emit("deactivate",e),e.binarySignal=0,this.outputs.forEach(function(t){t.receive&&"function"==typeof t.receive&&"continuous"===t.mode&&t.receive(e)})}},{key:"toggle",value:function(){this.isOn?this.deactivate():this.activate()}},{key:"receive",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.signal;this.isOn?this.deactivate(t):(t.current=t.current*this.amplitude,this.activate(t))}},{key:"transmit",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.signal;this.outputs.forEach(function(t){t.receive&&t.receive(e)})}},{key:"update",value:function(){}}])&&r(e.prototype,t),n&&r(e,n),Object.defineProperty(e,"prototype",{writable:!1}),u}(o.Part);n=t,o="Amplifier",(t=u(t="type"))in n?Object.defineProperty(n,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[t]=o},{"../Part.js":2,"../signals/ElectricalSignal.js":18}],6:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=t("../Part.js"),u=(t=t("../signals/ElectricalSignal.js"))&&t.__esModule?t:{default:t};function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,a(o.key),o)}}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(n){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=i(n),e=(t=o?(t=i(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),this);if(t&&("object"===c(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return f(e)}}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function i(t){return(i=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function a(t){t=function(t,e){if("object"!=c(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===e?String:Number)(t);n=n.call(t,e||"default");if("object"!=c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"==c(t)?t:String(t)}var t=n.default=function(t){var e=a;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t);var n,i=l(a);function a(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,o=this,r=a;if(o instanceof r)return"object"===c(t)&&(n=t.z||0,e=t.y||0,t=t.x||0),(o=i.call(this,t,e,n)).type=a.type,o.signal=new u.default,o.connectedParts=[],o.isOn=!1,o.onFn=o.press.bind(f(o)),o.offFn=o.release.bind(f(o)),o;throw new TypeError("Cannot call a class as a function")}return e=a,(t=[{key:"setYCraft",value:function(t){this.yCraft=t}},{key:"connect",value:function(t){void 0!==t.inputs&&t.inputs.push(this),this.connectedParts.push(t)}},{key:"press",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.signal;this.isOn=!0,this.emit("press",e),this.connectedParts.forEach(function(t){t.receive&&"function"==typeof t.receive&&t.receive(e)})}},{key:"release",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.signal;this.isOn=!1,this.emit("release"),e.binarySignal=0,this.connectedParts.forEach(function(t){t.receive&&"function"==typeof t.receive&&"continuous"===t.mode&&t.receive(e)})}},{key:"receive",value:function(t){}},{key:"transmit",value:function(e){this.connectedParts.forEach(function(t){t.receive&&t.receive(e)})}}])&&r(e.prototype,t),n&&r(e,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(o.Part);n=t,o="Button",(t=a(t="type"))in n?Object.defineProperty(n,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[t]=o},{"../Part.js":2,"../signals/ElectricalSignal.js":18}],7:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=t("../Part.js"),r=(t=t("../signals/ElectricalSignal.js"))&&t.__esModule?t:{default:t};function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,u(o.key),o)}}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(n){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=a(n),e=(t=o?(t=a(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),this);if(t&&("object"===c(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t){t=function(t,e){if("object"!=c(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===e?String:Number)(t);n=n.call(t,e||"default");if("object"!=c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"==c(t)?t:String(t)}var t=n.default=function(t){var e=u;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t);var n,a=l(u);function u(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,o=(3<arguments.length&&void 0!==arguments[3]?arguments[3]:{}).text,o=void 0===o?"Your Sign Here":o,r=this,i=u;if(r instanceof i)return"object"===c(t)&&(n=t.z||0,e=t.y||0,t=t.x||0),(r=a.call(this,t,e,n)).type=u.type,r.text=o,r.connectedParts=[],r.inputs=[],r;throw new TypeError("Cannot call a class as a function")}return e=u,(t=[{key:"setText",value:function(t){this.text=t,console.log("Display text set to: ".concat(this.text))}},{key:"connect",value:function(t){this.connectedParts.push(t),this.inputs.push(t)}},{key:"receive",value:function(t){t instanceof r.default&&this.setText(t.data)}}])&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),u}(o.Part);n=t,o="Display",(t=u(t="type"))in n?Object.defineProperty(n,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[t]=o},{"../Part.js":2,"../signals/ElectricalSignal.js":18}],8:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;t=t("../Part.js");function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,u(o.key),o)}}function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function i(n){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=a(n),e=(t=o?(t=a(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),this);if(t&&("object"===s(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return l(e)}}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t){t=function(t,e){if("object"!=s(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===e?String:Number)(t);n=n.call(t,e||"default");if("object"!=s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"==s(t)?t:String(t)}var c,n=n.default=function(t){var e=c;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&r(e,t);var n,u=i(c);function c(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},r=o.wattage,r=void 0===r?40:r,o=o.maxWattage,o=void 0===o?120:o,i=this,a=c;if(i instanceof a)return"object"===s(t)&&(r=t.wattage||r,o=t.maxWattage||o,n=t.z||0,e=t.y||0,t=t.x||0),(i=u.call(this,t,e,n)).toggleFn=i.toggle.bind(l(i)),i.mode="continuous",i.onFn=i.activate.bind(l(i)),i.offFn=i.deactivate.bind(l(i)),i.type=c.type,i.isOn=!1,i.color=65280,i.props={},i.props.wattage=r,i.props.maxWattage=o,i.props.isBroken=!1,i;throw new TypeError("Cannot call a class as a function")}return e=c,(t=[{key:"setYCraft",value:function(t){this.yCraft=t}},{key:"activate",value:function(t){this.isOn=!0,this.emit("activate",t)}},{key:"deactivate",value:function(t){this.isOn=!1,this.emit("deactivate",t)}},{key:"toggle",value:function(t){this.isOn?this.deactivate(t):this.activate(t)}},{key:"receive",value:function(t){var e;this.props.isBroken||(e=(this.signal=t).calculatePower(),this.isOn?this.deactivate(t):(!this.yCraft.powerRequired||e>=this.props.wattage)&&this.activate(t))}},{key:"break",value:function(t){this.props.isBroken=!0,this.emit("broken")}},{key:"handleCollision",value:function(t){this.props.isBroken||"Rover"===t.type&&(this.isOn=!1,this.props.isBroken=!0,this.props.color="grey",this.emit("broken"))}},{key:"update",value:function(){this.props.isBroken}}])&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),c}(t.Part);t=n,n="LEDLight",(c=u(c="type"))in t?Object.defineProperty(t,c,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[c]=n},{"../Part.js":2}],9:[function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=a(t("../utils/EventEmitter.js")),i=a(t("../signals/ElectricalSignal.js"));function a(t){return t&&t.__esModule?t:{default:t}}function u(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,function(t){t=function(t,e){if("object"!=r(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===e?String:Number)(t);n=n.call(t,e||"default");if("object"!=r(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"==r(t)?t:String(t)}(o.key),o)}}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(n){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=l(n),e=(t=o?(t=l(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),this);if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}n.default=function(t){var e=r;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c(e,t);var n,o=s(r);function r(){var t;if(this instanceof r)return(t=o.call(this)).connectedComponent=null,t.laserSignal=new i.default({voltage:5,current:.1}),t;throw new TypeError("Cannot call a class as a function")}return e=r,(t=[{key:"connect",value:function(t){this.connectedComponent=t}},{key:"emitLaser",value:function(){this.connectedComponent&&this.connectedComponent.receive(this.laserSignal)}},{key:"receive",value:function(t){}}])&&u(e.prototype,t),n&&u(e,n),Object.defineProperty(e,"prototype",{writable:!1}),r}(o.default)},{"../signals/ElectricalSignal.js":18,"../utils/EventEmitter.js":19}],10:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=t("../Part.js"),u=(t=t("../signals/ElectricalSignal.js"))&&t.__esModule?t:{default:t};function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,a(o.key),o)}}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(n){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=i(n),e=(t=o?(t=i(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),this);if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return f(e)}}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function i(t){return(i=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function a(t){t=function(t,e){if("object"!=r(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===e?String:Number)(t);n=n.call(t,e||"default");if("object"!=r(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"==r(t)?t:String(t)}var t=n.default=function(t){var e=a;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t);var n,i=l(a);function a(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,o=this,r=a;if(o instanceof r)return(o=i.call(this,t,e,n)).type=a.type,o.connectedParts=[],o.signal=new u.default,o.isLatched=!1,o.onFn=o.engage.bind(f(o)),o.offFn=o.disengage.bind(f(o)),o;throw new TypeError("Cannot call a class as a function")}return e=a,(t=[{key:"setYCraft",value:function(t){this.yCraft=t}},{key:"connect",value:function(t){"Wire"===t.constructor.name&&t.inputs.push(this),this.connectedParts.push(t)}},{key:"toggle",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.signal;this.isLatched?this.disengage(t):this.engage(t)}},{key:"engage",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.signal;this.isLatched=!0,this.emit("engage",t),this.transmit(t)}},{key:"disengage",value:function(t){this.isLatched=!1,this.emit("disengage"),this.transmit(t)}},{key:"transmit",value:function(e){this.connectedParts.forEach(function(t){t.receive&&t.receive(e)})}}])&&c(e.prototype,t),n&&c(e,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(o.Part);n=t,o="Latch",(t=a(t="type"))in n?Object.defineProperty(n,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[t]=o},{"../Part.js":2,"../signals/ElectricalSignal.js":18}],11:[function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;t=(t=t("../utils/EventEmitter.js"))&&t.__esModule?t:{default:t};function i(e,t){var n,o=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),o.push.apply(o,n)),o}function a(o){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach(function(t){var e,n;e=o,n=r[t=t],(t=c(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach(function(t){Object.defineProperty(o,t,Object.getOwnPropertyDescriptor(r,t))})}return o}function u(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,c(o.key),o)}}function c(t){t=function(t,e){if("object"!=r(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===e?String:Number)(t);n=n.call(t,e||"default");if("object"!=r(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"==r(t)?t:String(t)}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(n){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=f(n),e=(t=o?(t=f(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),this);if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}n.default=function(t){var e=r;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t);var n,o=l(r);function r(){var t;if(this instanceof r)return(t=o.call(this)).connectedComponent=null,t.orientation=0,t;throw new TypeError("Cannot call a class as a function")}return e=r,(t=[{key:"connect",value:function(t){this.connectedComponent=t}},{key:"setOrientation",value:function(t){this.orientation=t}},{key:"receive",value:function(t){"LightSignal"===t.constructor.name&&(console.log("Mirror: Reflecting laser at orientation ".concat(this.orientation," degrees.")),this.connectedComponent)&&(t=a(a({},t),{},{direction:this.calculateReflectionDirection(t.direction)}),this.connectedComponent.receive(t))}},{key:"calculateReflectionDirection",value:function(t){return(t+2*this.orientation)%360}}])&&u(e.prototype,t),n&&u(e,n),Object.defineProperty(e,"prototype",{writable:!1}),r}(t.default)},{"../utils/EventEmitter.js":19}],12:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=t("../Part.js"),r=(t=t("../signals/ElectricalSignal.js"))&&t.__esModule?t:{default:t};function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,c(o.key),o)}}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(n){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=u(n),e=(t=o?(t=u(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),this);if(t&&("object"===i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return f(e)}}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function c(t){t=function(t,e){if("object"!=i(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===e?String:Number)(t);n=n.call(t,e||"default");if("object"!=i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"==i(t)?t:String(t)}var t=n.default=function(t){var e=c;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t);var n,u=l(c);function c(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},r=o.motionTimeout,r=void 0===r?4e3:r,o=o.debounceDelay,o=void 0===o?500:o,i=this,a=c;if(i instanceof a)return(i=u.call(this,t,e,n)).type=c.type,i.isConnected=!1,i.connectedParts=[],i.motionTimeout=r,i.debounceDelay=o,i.lastMotionTime=0,i.motionTimer=null,i.onFn=i.detectMotion.bind(f(i)),i.offFn=function(){},i;throw new TypeError("Cannot call a class as a function")}return e=c,(t=[{key:"connect",value:function(t){this.isConnected=!0,"Wire"===t.constructor.name&&t.inputs.push(this),this.connectedParts.push(t)}},{key:"detectMotion",value:function(){var t=this,e=Date.now();e-this.lastMotionTime<this.debounceDelay||(this.lastMotionTime=e,this.isConnected?((e=new r.default({voltage:5})).encodeUSB(1),console.log("Motion detected!"),this.transmit(e),this.emit("motion",e),clearTimeout(this.motionTimer),this.motionTimer=setTimeout(function(){t.emit("still")},this.motionTimeout)):console.log("Motion detector is not connected to any component."))}},{key:"transmit",value:function(e){this.connectedParts.forEach(function(t){"function"==typeof t.receive&&t.receive(e)})}},{key:"update",value:function(){}}])&&a(e.prototype,t),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),c}(o.Part);n=t,o="MotionDetector",(t=c(t="type"))in n?Object.defineProperty(n,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[t]=o},{"../Part.js":2,"../signals/ElectricalSignal.js":18}],13:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var c=(o=t("../signals/ElectricalSignal.js"))&&o.__esModule?o:{default:o},o=t("../Part.js");function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,u(o.key),o)}}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(n){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=a(n),e=(t=o?(t=a(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),this);if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return f(e)}}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t){t=function(t,e){if("object"!=r(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===e?String:Number)(t);n=n.call(t,e||"default");if("object"!=r(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"==r(t)?t:String(t)}var t=n.default=function(t){var e=u;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t);var n,a=l(u);function u(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,o=(3<arguments.length&&void 0!==arguments[3]?arguments[3]:{}).debounceDelay,o=void 0===o?500:o,r=this,i=u;if(r instanceof i)return(r=a.call(this,t,e,n)).type=u.type,r.connectedParts=[],r.signal=new c.default,r.debounceDelay=o,r.lastTriggerTime=0,r.onFn=r.trigger.bind(f(r)),r.offFn=r.release.bind(f(r)),r;throw new TypeError("Cannot call a class as a function")}return e=u,(t=[{key:"connect",value:function(t){"Wire"===t.constructor.name&&t.inputs.push(this),this.connectedParts.push(t)}},{key:"toggle",value:function(){Date.now()-this.lastTriggerTime<this.debounceDelay||(this.isOn?this.release():this.trigger())}},{key:"trigger",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.signal;this.lastTriggerTime=Date.now(),this.isOn=!0,this.emit("trigger",e),this.connectedParts.forEach(function(t){t.onFn&&"function"==typeof t.onFn&&t.onFn(e)})}},{key:"release",value:function(){var e=this;this.isOn=!1,this.emit("release"),this.connectedParts.forEach(function(t){t.offFn&&"function"==typeof t.offFn&&t.offFn(e.signal)})}},{key:"receive",value:function(t){}}])&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),u}(o.Part);n=t,o="PressureSensor",(t=u(t="type"))in n?Object.defineProperty(n,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[t]=o},{"../Part.js":2,"../signals/ElectricalSignal.js":18}],14:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=t("../Part.js"),u=(t=t("../signals/ElectricalSignal.js"))&&t.__esModule?t:{default:t};function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,a(o.key),o)}}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(n){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=i(n),e=(t=o?(t=i(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),this);if(t&&("object"===c(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return f(e)}}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function i(t){return(i=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function a(t){t=function(t,e){if("object"!=c(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===e?String:Number)(t);n=n.call(t,e||"default");if("object"!=c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"==c(t)?t:String(t)}var t=n.default=function(t){var e=a;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t);var n,i=l(a);function a(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,o=((3<arguments.length&&void 0!==arguments[3]?arguments[3]:{}).amplitude,this),r=a;if(o instanceof r)return"object"===c(t)&&(n=t.z||0,e=t.y||0,t=t.x||0),(o=i.call(this,t,e,n)).type=a.type,o.connectedParts=[],o.mode="continuous",o.signal=new u.default,o.outputs=[],o.inputs=[],o.onFn=o.activate.bind(f(o)),o.offFn=o.deactivate.bind(f(o)),o;throw new TypeError("Cannot call a class as a function")}return e=a,(t=[{key:"setYCraft",value:function(t){this.yCraft=t}},{key:"connect",value:function(t){void 0!==t.inputs&&t.inputs.push(this),this.outputs.push(t)}},{key:"activate",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.signal;this.isOn=!0,this.emit("activate",t),this.transmit(t)}},{key:"deactivate",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.signal;this.isOn=!1,this.emit("deactivate",e),e.binarySignal=0,this.outputs.forEach(function(t){t.receive&&"function"==typeof t.receive&&"continuous"===t.mode&&t.receive(e)})}},{key:"toggle",value:function(){this.isOn?this.deactivate():this.activate()}},{key:"receive",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.signal;this.isOn?this.deactivate(t):this.activate(t)}},{key:"transmit",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.signal;this.outputs.forEach(function(t){t.receive&&t.receive(e)})}},{key:"update",value:function(){}}])&&r(e.prototype,t),n&&r(e,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(o.Part);n=t,o="Relay",(t=a(t="type"))in n?Object.defineProperty(n,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[t]=o},{"../Part.js":2,"../signals/ElectricalSignal.js":18}],15:[function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,c(o.key),o)}}function i(t,e){return(i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function a(n){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=u(n),e=(t=o?(t=u(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),this);if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return l(e)}}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function c(t){t=function(t,e){if("object"!=r(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===e?String:Number)(t);n=n.call(t,e||"default");if("object"!=r(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"==r(t)?t:String(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s,f,y,t=function(t){var e=s;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&i(e,t);var n,c=a(s);function s(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},r=o.velocity,r=void 0===r?{x:5,y:5}:r,i=o.color,i=void 0===i?13421772:i,o=o.movementRate,o=void 0===o?16.666:o,a=this,u=s;if(a instanceof u)return(a=c.call(this,t,e,n)).type=s.type,a.props={},a.props.velocity=r,a.props.color=i,a.props.movementRate=o,a.state="inactive",a.isOn=!1,a.timers={movement:null},a.defaultDelay=100,a.collisionCooldown=!1,a.onFn=a.start.bind(l(a)),a.offFn=a.stop.bind(l(a)),a.on("collision",a.handleCollision),a;throw new TypeError("Cannot call a class as a function")}return e=s,(t=[{key:"setYCraft",value:function(t){this.yCraft=t}},{key:"start",value:function(){var t=this;this.state="active",this.isOn=!0,this.timers.movementInterval&&clearInterval(this.timers.movementInterval),this.timers.movementInterval=setInterval(function(){return t.update()},this.props.movementRate)}},{key:"stop",value:function(){this.state="inactive",this.isOn=!1,this.timers.movementInterval&&clearInterval(this.timers.movementInterval)}},{key:"update",value:function(){"active"===this.state&&(this.emit("move",this.position),this.position.x+=this.props.velocity.x,this.position.y+=this.props.velocity.y)}},{key:"handleCollision",value:function(t){"Wire"===t.name||"Rover"===t.name||this.collisionCooldown||(this.props.velocity.x*=-1,this.props.velocity.y*=-1,this.emit("move",this.position),this.startCollisionCooldown())}},{key:"startCollisionCooldown",value:function(){var t=this;this.collisionCooldown=!0,setTimeout(function(){t.collisionCooldown=!1},this.props.movementRate)}},{key:"unload",value:function(){this.timers.movementInterval&&clearInterval(this.timers.movementInterval)}}])&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),s}(t("../Part.js").Part);s=t,y="Rover",(f=c(f="type"))in s?Object.defineProperty(s,f,{value:y,enumerable:!0,configurable:!0,writable:!0}):s[f]=y,n.default=t},{"../Part.js":2}],16:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=t("../Part.js");(t=t("../signals/ElectricalSignal.js"))&&t.__esModule;function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,s(o.key),o)}}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function u(n){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=c(n),e=(t=o?(t=c(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),this);if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t){t=function(t,e){if("object"!=r(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===e?String:Number)(t);n=n.call(t,e||"default");if("object"!=r(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"==r(t)?t:String(t)}var t=n.default=function(t){var e=r;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&a(e,t);var n,o=u(r);function r(){var t;if(this instanceof r)return(t=o.call(this)).type=r.type,t.props={},t.image=function(t){return t},t.connectedParts=[],t.inputs=[],t.outputs=[],t;throw new TypeError("Cannot call a class as a function")}return e=r,(t=[{key:"setImage",value:function(t){this.image=t}},{key:"connect",value:function(t){this.connectedParts.push(t),this.outputs.push(t)}},{key:"receive",value:function(t){t=this.image(t);this.transmit(t)}},{key:"transmit",value:function(e){this.emit("transmit",this.outputs,e),this.outputs.forEach(function(t){t.receive&&t.receive(e)})}}])&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),r}(o.Part);n=t,o="VirtualMachine",(t=s(t="type"))in n?Object.defineProperty(n,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[t]=o},{"../Part.js":2,"../signals/ElectricalSignal.js":18}],17:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=t("../Part.js");(t=t("../signals/ElectricalSignal.js"))&&t.__esModule;function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,l(o.key),o)}}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function u(n){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=s(n),e=(t=o?(t=s(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),this);if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return c(e)}}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function l(t){t=function(t,e){if("object"!=r(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===e?String:Number)(t);n=n.call(t,e||"default");if("object"!=r(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"==r(t)?t:String(t)}var t=n.default=function(t){var e=r;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&a(e,t);var n,o=u(r);function r(){var t=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).signalLoss,t=void 0===t||t,e=this,n=r;if(e instanceof n)return(e=o.call(this)).type=r.type,e.props={signalLoss:t,resistivity:1.68e-8,crossSectionalArea:208e-8},e.connectedParts=[],e.segments=[],e.inputs=[],e.outputs=[],e.onFn=e.receive.bind(c(e)),e.offFn=e.stopTransmit.bind(c(e)),e.mode="continuous",e;throw new TypeError("Cannot call a class as a function")}return e=r,(t=[{key:"calculateResistance",value:function(t){return this.props.resistivity*t/this.props.crossSectionalArea}},{key:"connect",value:function(t){this.connectedParts.push(t),this.outputs.push(t),this.updateSegmentLengths(t)}},{key:"updateSegmentLengths",value:function(t){this.calculateSegmentLengthsForPartArray(t,this.inputs),this.calculateSegmentLengthsForPartArray(t,this.outputs)}},{key:"calculateSegmentLengthsForPartArray",value:function(e,t){var n=this;t.forEach(function(t){t!==e&&(t=n.calculateSegment(e.position,t.position),n.segments.push(t))})}},{key:"calculateSegment",value:function(t,e){return{input:t,output:e,length:Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)+Math.pow(e.z-t.z,2))}}},{key:"receive",value:function(t){this.isOn?this.stopTransmit(t):(this.props.signalLoss&&(t=this.applySignalLoss(t)),this.transmit(t))}},{key:"applySignalLoss",value:function(n){var o=this,t=this.segments.reduce(function(t,e){e=o.calculateResistance(e.length);return t+n.current*e},0);return n.voltage=Math.max(n.voltage-t,0),n}},{key:"stopTransmit",value:function(e){this.isOn=!1,this.emit("stopTransmit",e),e.binarySignal=0,this.outputs.forEach(function(t){t.receive&&"function"==typeof t.receive&&"continuous"===t.mode&&t.receive(e)})}},{key:"transmit",value:function(e){this.isOn=!0,this.props.signalLoss&&(e=this.applySignalLoss(e)),this.emit("transmit",this.outputs,e),this.outputs.forEach(function(t){t.receive&&t.receive(e)})}}])&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),r}(o.Part);n=t,o="Wire",(t=l(t="type"))in n?Object.defineProperty(n,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[t]=o},{"../Part.js":2,"../signals/ElectricalSignal.js":18}],18:[function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,function(t){t=function(t,e){if("object"!=r(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===e?String:Number)(t);n=n.call(t,e||"default");if("object"!=r(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"==r(t)?t:String(t)}(o.key),o)}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;n.default=function(){function l(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=t.voltage,e=void 0===e?5:e,n=t.current,n=void 0===n?1:n,o=t.resistance,o=void 0===o?0:o,r=t.capacitance,r=void 0===r?0:r,i=t.inductance,i=void 0===i?0:i,a=t.frequency,a=void 0===a?0:a,u=t.phaseAngle,u=void 0===u?0:u,t=t.powerFactor,t=void 0===t?1:t,c=this,s=l;if(!(c instanceof s))throw new TypeError("Cannot call a class as a function");this.voltage=e,this.current=n,this.resistance=o,this.capacitance=r,this.inductance=i,this.frequency=a,this.phaseAngle=u,this.powerFactor=t,this.binarySignal=1}var t,e,n;return t=l,(e=[{key:"calculatePower",value:function(){return this.voltage*this.current}},{key:"encodeUSB",value:function(t){t=1===t?.2:-.2;this.dPlusVoltage=this.voltage+t,this.dMinusVoltage=this.voltage-t}}])&&o(t.prototype,e),n&&o(t,n),Object.defineProperty(t,"prototype",{writable:!1}),l}()},{}],19:[function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,function(t){t=function(t,e){if("object"!=r(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===e?String:Number)(t);n=n.call(t,e||"default");if("object"!=r(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"==r(t)?t:String(t)}(o.key),o)}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;n.default=function(){function t(){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.listeners={},this.anyListeners=[]}var e,n,o;return e=t,(n=[{key:"onAny",value:function(t){this.anyListeners.push(t)}},{key:"offAny",value:function(e){this.anyListeners=this.anyListeners.filter(function(t){return t!==e})}},{key:"on",value:function(t,e){this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push(e)}},{key:"off",value:function(t,e){this.listeners[t]&&(this.listeners[t]=this.listeners[t].filter(function(t){return t!==e}))}},{key:"once",value:function(r,i){var a=this;this.on(r,function t(){a.off(r,t);for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];i.apply(a,n)})}},{key:"emit",value:function(n){for(var o=this,t=arguments.length,r=new Array(1<t?t-1:0),e=1;e<t;e++)r[e-1]=arguments[e];this.anyListeners.forEach(function(t){try{var e=n;o.type&&(e=o.type+"::"+n),t.call.apply(t,[o,e].concat(r))}catch(t){console.error('Error when executing any listener for event "'.concat(n,'":'),t)}});var i=this.listeners[n];i&&i.forEach(function(t){try{t.apply(o,r)}catch(t){console.error('Error when executing listener for event "'.concat(n,'":'),t)}})}},{key:"listenerCount",value:function(t){return this.listeners[t]?this.listeners[t].length:0}}])&&i(e.prototype,n),o&&i(e,o),Object.defineProperty(e,"prototype",{writable:!1}),t}()},{}],20:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(a,r){var t=a.createSutra();t.on("blackhole::create",function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{position:{x:0,y:0}};a.createEntity({type:"BLACK_HOLE",texture:"fire",isStatic:!0,isSensor:!0,width:4,height:4,position:{x:t.position.x,y:t.position.y},mass:100})});function o(t,e,n,o){var r,i;a.bodyMap[e.id]&&(r=u.sub(e.position,t.position),(i=u.magnitude(r))<.5||(r=u.normalize(r),n=n*t.mass*e.mass/(i*i),n=Math.min(n,1),t=!1,i=(t=void 0!==o.repulsion?o.repulsion:t)?1:-1,a.applyForce(e.id,{x:i*r.x*n,y:i*r.y*n})))}return t.addCondition("gravityTick",function(t,e){return e.tick%5==0}),t.if("gravityTick").then("applyGravity"),t.on("applyGravity",function(t,e,n){void 0!==r?Object.keys(n.ents._).forEach(function(t){t=n.ents._[t];"BLACK_HOLE"!==t.type&&o(r,t,.01,n)}):n.ents.BLACK_HOLE&&n.ents.BLACK_HOLE.forEach(function(e){Object.keys(n.ents._).forEach(function(t){t=n.ents._[t];"BLACK_HOLE"!==t.type&&o(e,t,.01,n)})})}),t.if("entTouchedBlackhole").then("blackHoleCollision"),t.addCondition("entTouchedBlackhole",function(t,e){return void 0!==r?"COLLISION"===t.type&&"START"===t.kind&&t[r.type]:"COLLISION"===t.type&&"START"===t.kind&&t.BLACK_HOLE}),t.on("blackHoleCollision",function(t,e,n){var o=t.bodyA;t.bodyB;"BLACK_HOLE"===t.bodyA.type&&(o=t.bodyB,t.bodyA),void 0!==r&&(o=t.bodyA.type===r.type?t.bodyB:t.bodyA),a.removeEntity(o.id)}),t};var u={add:function(t,e){return{x:t.x+e.x,y:t.y+e.y}},sub:function(t,e){return{x:t.x-e.x,y:t.y-e.y}},mult:function(t,e){return{x:t.x*e,y:t.y*e}},div:function(t,e){return{x:t.x/e,y:t.y/e}},magnitude:function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},normalize:function(t){var e=u.magnitude(t);return 0<e?u.div(t,e):{x:0,y:0}}}},{}],21:[function(t,e,n){"use strict";function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(u){var t=u.createSutra();return t.addCondition("canDropBomb",function(t,e){t=u.components.actionRateLimiter.getLastActionTime(t.id,"dropBomb");return 1e3<=Date.now()-t}),t.addAction({if:"canDropBomb",then:"dropBomb"}),t.on("dropBomb",function(t,e,n){var o,r,i=t.position,a=t.rotation;i?(u.components.actionRateLimiter.recordAction(t.id,"dropBomb"),void 0!==t.radius&&(t.width=2*t.radius,t.height=2*t.radius),t.width,t.height,"object"===c(a=void 0===a?0:a)&&(a=a.z),o=Math.sin(a),r=-Math.cos(a),i={type:"BOMB",mass:1e4,collisionStart:!0,position:{x:i.x+0+16*Math.sin(a),y:i.y+0+16*-Math.cos(a)},lifetime:2e3,friction:.5,frictionStatic:.5,frictionAir:.01,texture:{sheet:"loz_spritesheet",sprite:"bomb",playing:!1},owner:t.id,rotation:0,velocity:{x:.05*o,y:.05*r},height:16,width:16,damage:10},u.createEntity(i)):console.log("no player data available")}),t.if("entTouchedBomb").then("bombCollision"),t.addCondition("entTouchedBomb",function(t,e){if("COLLISION"===t.type&&"START"===t.kind)return"BOMB"===t.bodyA.type||"BOMB"===t.bodyB.type||void 0}),t.on("bombCollision",function(t,e,n){var o="BOMB"===t.bodyA.type?t.bodyA:t.bodyB,t="BOMB"===t.bodyA.type?t.bodyB:t.bodyA;-1!==["DEMON","HEXAPOD","FIRE","NPC","BLOCK","DOOR"].indexOf(t.type)&&("BLOCK"===t.type||"HEXAPOD"===t.type?u.systems.block.blockBulletCollision(t.id,o.id,t,o):(u.removeEntity(t.id),u.removeEntity(o.id)))}),t}},{}],22:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){t.createEntity({type:"DEMON",texture:"demon",width:8,height:8,depth:8,position:{x:-60,y:-60,z:8}}),t.createEntity({type:"DEMON",texture:"demon",width:8,height:8,depth:8,position:{x:64,y:-60,z:8}});t=t.createSutra();return t.addCondition("entityTouchedDemon",function(t,e){if(console.log("entityTouchedDemon check",t),"COLLISION"===t.type&&"START"===t.kind&&void 0!==t.DEMON)return!0}),t}},{}],23:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(n){n.createEntity({type:"FIRE",texture:{sheet:"loz_spritesheet",sprite:"fire"},width:16,height:16,depth:16,isStatic:!0,position:{x:-80,y:-60,z:16}}),n.createEntity({type:"FIRE",texture:{sheet:"loz_spritesheet",sprite:"fire"},width:16,height:16,depth:16,isStatic:!0,position:{x:80,y:-60,z:16}});var t=n.createSutra();return t.addCondition("entityTouchedFire",function(t,e){if("COLLISION"===t.type&&"START"===t.kind)return"FIRE"===t.bodyA.type||"FIRE"===t.bodyB.type||void 0}),t.if("entityTouchedFire").then("playNote",{note:"F#4"}).then("damageEntity"),t.on("damageEntity",function(t){var t="FIRE"===t.bodyA.type?t.bodyB:t.bodyA,e=t.texture;n.removeEntity(t.id),"PLAYER"===t.type&&(n.currentPlayerId=null,n.createDefaultPlayer({texture:e}))}),n.on("pointerDown",function(t,e){"FIRE"===t.type&&n.playNote("G4")}),t}},{}],24:[function(t,e,n){"use strict";function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(e,t){var n,o=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),o.push.apply(o,n)),o}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(r,n){var t=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},e=r.createSutra(),i=function(o){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach(function(t){var e,n;e=o,n=r[t=t],(t=function(t){t=function(t,e){if("object"!=a(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===e?String:Number)(t);n=n.call(t,e||"default");if("object"!=a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"==a(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach(function(t){Object.defineProperty(o,t,Object.getOwnPropertyDescriptor(r,t))})}return o}({unitType:"PARTICLE",collisionActive:!1,texture:"pixel",color:65280,unitSize:{width:4,height:4},sprayAngle:Math.PI/8,sprayWidth:Math.PI/4,forceMagnitude:.5},t);return e.if("fountTick").then("fountSpray"),e.addCondition("fountTick",function(t,e){return t.name===n.name&&e.tick%10==0}),e.on("fountSpray",function(t,e,n){var o,t=void 0!==t?t.position:{x:0,y:0};t=t,o=[(o=i.color)>>16&255,o>>8&255,255&o],o="rgba(".concat(o.join(","),", 0.5)"),function(t,e){e=(1<arguments.length&&void 0!==e?e:i.sprayAngle)+(Math.random()-.5)*i.sprayWidth,e={x:i.forceMagnitude*Math.cos(e),y:i.forceMagnitude*Math.sin(e)},r.applyForce(t.id,e)}(r.createEntity({type:i.unitType,collisionActive:!1,collisionEnd:!1,collisionStart:!1,height:i.unitSize.height,color:i.color,width:i.unitSize.width,position:t,friction:.05,frictionAir:.005,frictionStatic:.25,style:{backgroundColor:o},isSensor:!0}))}),e}},{}],25:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(o){for(var t=0;t<150;t+=5)for(var e=0;e<150;e+=5)o.createEntity({type:"LIFE_CELL",health:2,position:{x:t,y:e},body:!1,width:5,height:5});!function(t,e,n,o){o.createEntity({type:"LIFE_CELL",width:n,height:n,body:!1,health:1,position:{x:t,y:e}}),o.createEntity({type:"LIFE_CELL",width:n,height:n,body:!1,health:1,position:{x:t+n,y:e}}),o.createEntity({type:"LIFE_CELL",width:n,height:n,body:!1,health:1,position:{x:t+2*n,y:e}}),o.createEntity({type:"LIFE_CELL",width:n,height:n,body:!1,health:1,position:{x:t+2*n,y:e-n}}),o.createEntity({type:"LIFE_CELL",width:n,height:n,body:!1,health:1,position:{x:t+n,y:e-2*n}})}(100,100,5,o);var n=o.createSutra();return n.if("updateCellState").then("transitionCellState"),n.addCondition("updateCellState",function(t,e){return"LIFE_CELL"===t.type&&e.tick%10==0}),n.on("transitionCellState",function(t,e,n){i=t,a=[],u=[{x:-5,y:-5},{x:0,y:-5},{x:5,y:-5},{x:-5,y:0},{x:5,y:0},{x:-5,y:5},{x:0,y:5},{x:5,y:5}],n.ents.LIFE_CELL.forEach(function(t){for(var e=0,n=u;e<n.length;e++){var o=n[e],r=(i.position.x+o.x+150)%150,o=(i.position.y+o.y+150)%150;if(t.position.x===r&&t.position.y===o){a.push(t);break}}});var i,a,u,n=a.filter(function(t){return 1===t.health}).length;1===t.health&&(n<2||3<n)?t.health=0:2===t.health&&3===n&&(t.health=1),o.updateEntity({id:t.id,health:t.health,style:{backgroundColor:1===t.health?"green":"black"}})}),n}},{}],26:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(c){for(var t=0;t<22;t++){var e=t/22*2*Math.PI,n=80*Math.cos(e),e=80*Math.sin(e);c.createEntity({type:"HEXAPOD",texture:"demon",width:8,height:8,position:{x:n,y:e}})}var o=c.createSutra();return o.if("bulletHitHexapod").then("hexapodGrow"),o.addCondition("bulletHitHexapod",function(t,e){return"COLLISION"===t.type&&"START"===t.kind&&t.HEXAPOD&&t.BULLET}),o.on("hexapodGrow",function(t){var e,t=t.HEXAPOD;16<t.width&&(e={animation:"pulse-invert 5s",filter:"invert(90%)"}),c.updateEntity({id:t.id,width:1.1*t.width,height:1.1*t.height,style:e})}),o.if("hexapodTick").then("hexapodThink"),o.addCondition("hexapodTick",function(t,e){return"HEXAPOD"===t.type&&e.tick%1==0}),o.on("hexapodThink",function(t,e,n){var o=t,t=n.ents.HEXAPOD,r={x:0,y:0},i={x:0,y:0},a={x:0,y:0},u={x:0,y:0},n=(void 0!==n.currentPlayer&&n.currentPlayer&&(n=n.currentPlayer.position,n=s.sub(n,o.position),u=s.mult(s.normalize(n),.4)),t.forEach(function(t){var e;t.id!==o.id&&((e=s.magnitude(s.sub(o.position,t.position)))<1500&&(r=s.add(r,t.velocity)),e<1500&&(i=s.add(i,t.position)),e<o.width+t.width)&&(t=s.sub(o.position,t.position),a=s.add(a,s.div(t,e*e)))}),1<t.length&&(r=s.div(r,t.length-1),i=s.div(i,t.length-1),i=s.sub(i,o.position),a=s.div(a,t.length-1)),r=s.mult(s.normalize(r),.1),i=s.mult(s.normalize(i),.4),a=s.mult(s.normalize(a),.81),s.add(s.add(s.add(r,i),a),u)),t=s.add(o.position,s.mult(n,1));t.z=1,c.updateEntity({id:o.id,position:t})}),o};var s={add:function(t,e){return{x:t.x+e.x,y:t.y+e.y}},sub:function(t,e){return{x:t.x-e.x,y:t.y-e.y}},mult:function(t,e){return{x:t.x*e,y:t.y*e}},div:function(t,e){return{x:t.x/e,y:t.y/e}},magnitude:function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},normalize:function(t){var e=s.magnitude(t);return 0<e?s.div(t,e):{x:0,y:0}}}},{}],27:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){e.createEntity({type:"NOTE",color:13434624,width:32,height:32,depth:16,isStatic:!0,position:{x:0,y:0,z:1}}),e.createSutra().addCondition("entityTouchedNote",function(t,e){if("COLLISION"===t.type&&"START"===t.kind)return"NOTE"===t.bodyA.type||"NOTE"===t.bodyB.type||void 0}),e.on("pointerDown",function(t){"NOTE"===t.type&&e.playNote(t.kind),"DRUM"===t.type&&e.playDrum(t.kind)})}},{}],28:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(r){var t=r.createSutra(),i={A:"MOVE_LEFT",D:"MOVE_RIGHT",SPACE:"JUMP",O:"JUMP"};return t.on("entityInput::handleInputs",function(n,e){var o=[];e.controls&&Object.keys(e.controls).forEach(function(t){e.controls[t]&&i[t]&&o.push(i[t])}),o.forEach(function(t){var e={x:0,y:0};switch(t){case"MOVE_LEFT":e.x=-1.5;break;case"MOVE_RIGHT":e.x=1.5;break;case"JUMP":e.y=-1.5}0===e.x&&0===e.y||r.applyForce(n,e)})}),t}},{}],29:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(n){var t=n.createSutra();return t.addCondition("PLAYER_UP",{op:"or",conditions:["W","DPAD_UP"]}),t.addCondition("PLAYER_DOWN",{op:"or",conditions:["S","DPAD_DOWN"]}),t.addCondition("PLAYER_LEFT",{op:"or",conditions:["A","DPAD_LEFT"]}),t.addCondition("PLAYER_RIGHT",{op:"or",conditions:["D","DPAD_RIGHT"]}),t.addCondition("USE_ITEM_1",{op:"or",conditions:["SPACE","H","BUTTON_B"]}),t.addCondition("USE_ITEM_2",{op:"or",conditions:["J","BUTTON_X"]}),t.addCondition("ZOOM_IN",{op:"or",conditions:["K","BUTTON_A"]}),t.addCondition("ZOOM_OUT",{op:"or",conditions:["L","BUTTON_Y"]}),t.if("PLAYER_UP").then("MOVE_UP"),t.if("PLAYER_LEFT").then("MOVE_LEFT"),t.if("PLAYER_DOWN").then("MOVE_DOWN"),t.if("PLAYER_RIGHT").then("MOVE_RIGHT"),t.if("USE_ITEM_1").then("FIRE_BULLET").map("determineShootingSprite").then("updateSprite"),t.on("MOVE_UP",function(t){n.applyForce(t.id,{x:0,y:-1,z:0}),n.updateEntity({id:t.id,rotation:0})}),t.on("MOVE_DOWN",function(t){n.applyForce(t.id,{x:0,y:1,z:0}),n.updateEntity({id:t.id,rotation:Math.PI})}),t.on("MOVE_LEFT",function(t){n.applyForce(t.id,{x:-1,y:0,z:0}),n.updateEntity({id:t.id,rotation:-Math.PI/2})}),t.on("MOVE_RIGHT",function(t){n.applyForce(t.id,{x:1,y:0,z:0}),n.updateEntity({id:t.id,rotation:Math.PI/2})}),t.on("FIRE_BULLET",function(t){n.systems.bullet.fireBullet(t.id)}),t.on("SWING_SWORD",function(t){n.systems.sword.swingSword(t.id)}),t.on("CAMERA_SHAKE",function(t){n.shakeCamera(1e3)}),t.on("ZOOM_IN",function(t){var e=n.data.camera.currentZoom||1;n.setZoom(e+.05)}),t.on("ZOOM_OUT",function(t){var e=n.data.camera.currentZoom||1;n.setZoom(e-.05)}),t}},{}],30:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=o(t("../../mantra-sutras/blackhole.js")),a=o(t("../../mantra-sutras/fount.js"));function o(t){return t&&t.__esModule?t:{default:t}}function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,s(o.key),o)}}function c(t,e,n){(e=s(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}function s(t){t=function(t,e){if("object"!=i(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===e?String:Number)(t);n=n.call(t,e||"default");if("object"!=i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"==i(t)?t:String(t)}t=function(){function t(){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.id=t.id}var e,n,o;return e=t,(n=[{key:"init",value:function(t){this.game=t,this.createWorld(),t.use("CurrentFPS")}},{key:"createWorld",value:function(){var t,i=this.game,e=(i.reset(),i.setGravity(0,0,0),i.setSize(800,600),i.isTouchDevice(),i.zoom(1),i.createPlayer({color:13421772,position:{x:0,y:0,z:0}})),n=(i.setBackground("#007fff"),i.rules);n.removeNodes({if:"USE_ITEM_1"}),n.removeNodes({if:"USE_ITEM_2"}),n.removeNodes({if:"ZOOM_IN"}),n.removeNodes({if:"ZOOM_OUT"}),n.if("USE_ITEM_1").then("switchGravity"),n.if("USE_ITEM_2").then("shakeCamera"),n.if("USE_ITEM_3").then("ZOOM_IN"),n.if("USE_ITEM_4").then("ZOOM_OUT"),n.on("switchGravity",function(t,e,n){var o,r;t=t,void 0===(n=n).lastGravitySwitch&&(n.lastGravitySwitch=0),1e3<=Date.now()-n.lastGravitySwitch&&(n.repulsion=!n.repulsion,o=window.innerWidth/2,r=window.innerHeight/2+24,n.repulsion?(i.pingPosition(o,r,{color:"red",duration:1500,size:50,finalSize:200,borderWidth:3}),i.updateEntity({id:t.id,color:16711680})):(i.pingPosition(o,r,{reverse:!0,color:"white",duration:1500,size:50,finalSize:200,borderWidth:3}),i.updateEntity({id:t.id,color:16777215})),n.lastGravitySwitch=Date.now())}),n.on("shakeCamera",function(t,e,n){i.shakeCamera({duration:777,intensity:1e3})}),n.on("ZOOM_IN",function(t){var e=i.data.camera.currentZoom||1;i.setZoom(e+.01)}),n.on("ZOOM_OUT",function(t){var e=i.data.camera.currentZoom||1;i.setZoom(e-.01)}),i.use("StarField"),i.systems.border?i.systems.border.createAutoBorder():i.use("Border",{autoBorder:!0}),t=(n=i).createEntity({name:"fountA",type:"FOUNT",color:15740965,isStatic:!0,width:8,height:8,position:{x:200,y:0}}),n.updateEntity({id:t.id,sutra:(0,a.default)(n,t,{sprayAngle:0,color:15740965})}),t=n.createEntity({name:"fountB",type:"FOUNT",color:1356129,isStatic:!0,width:8,height:8,position:{x:-200,y:0}}),n.updateEntity({id:t.id,sutra:(0,a.default)(n,t,{sprayAngle:Math.PI,color:1356129})}),t=n.createEntity({name:"fountC",type:"FOUNT",color:3957496,isStatic:!0,width:8,height:8,position:{x:0,y:-200}}),n.updateEntity({id:t.id,sutra:(0,a.default)(n,t,{sprayAngle:Math.PI/2,color:3957496})}),t=n.createEntity({name:"fountD",type:"FOUNT",color:15326516,isStatic:!0,width:8,height:8,position:{x:0,y:200}}),n.updateEntity({id:t.id,sutra:(0,a.default)(n,t,{sprayAngle:-Math.PI/2,color:15326516})});n=i.createSutra();n.addCondition("particleTouchedWall",function(t,e){return"COLLISION"===t.type&&"START"===t.kind&&t.BORDER}),n.if("particleTouchedWall").then("particleWallCollision"),n.on("particleWallCollision",function(t){t=t.PARTICLE||t.STAR;t&&i.removeEntity(t.id)}),i.useSutra(n,"wallCollision"),i.updateEntity({id:e.id,sutra:(0,r.default)(i,e)}),i.createEntity({type:"WARP",exit:{world:"Home"},texture:"warp-to-home",width:64,height:64,depth:64,isStatic:!0,position:{x:600,y:-30,z:0}}),i.createEntity({type:"TEXT",text:"Warp To Mantra",style:{padding:"2px",fontSize:"16px",color:"#ffffff",textAlign:"center"},body:!1,position:{x:595,y:-60}})}}])&&u(e.prototype,n),o&&u(e,o),Object.defineProperty(e,"prototype",{writable:!1}),t}();c(t,"id","world-gravity-gardens"),c(t,"type","gravity-gardens");n.default=t},{"../../mantra-sutras/blackhole.js":20,"../../mantra-sutras/fount.js":24}],31:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=o(t("./sutras.js")),i=o(t("./welcomeMessage.js"));function o(t){return t&&t.__esModule?t:{default:t}}function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,s(o.key),o)}}function c(t,e,n){(e=s(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}function s(t){t=function(t,e){if("object"!=a(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===e?String:Number)(t);n=n.call(t,e||"default");if("object"!=a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"==a(t)?t:String(t)}t=function(){function t(){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.id=t.id,this.type=t.type}var e,n,o;return e=t,(n=[{key:"init",value:function(t){this.game=t,this.createWorld()}},{key:"createWorld",value:function(){var n=this.game;n.reset(),n.isTouchDevice()?n.zoom(1.44):n.zoom(1),n.setSize(16e3,9e3),n.setGravity(0,0,0),n.createPlayer({texture:{sheet:"loz_spritesheet",sprite:"player"},position:{x:0,y:0}}),n.createEntity({type:"BACKGROUND",texture:"garden",width:300,height:300,body:!1,position:{x:0,y:0,z:-10}}),n.setBackground("#007fff"),n.use("Block"),n.use("Bomb"),n.use("Border",{autoBorder:!0}),n.use("Bullet"),n.use("Boomerang"),n.use("Tone"),(0,i.default)(n),n.useSutra((0,r.default)(n),"HOME"),n.createEntity({name:"sutra-tree",type:"BACKGROUND",width:256,height:256,depth:1,texture:"sutra-tree",body:!1,position:{x:0,y:300,z:32}}),n.createEntity({type:"BACKGROUND",texture:"robot-arms-apartment",kind:"building",depth:1,width:1340,height:3668,body:!1,position:{x:900,y:-1800,z:-1}}),n.createEntity({type:"BACKGROUND",texture:"planet-express-base",kind:"building",width:2048,height:2048,depth:1,body:!1,position:{x:-900,y:-800,z:-1}}),n.createEntity({type:"BLOCK",texture:"tile-block",width:200,height:200,mass:1e4,position:{x:200,y:-800,z:-8}}),n.createEntity({type:"WARP",width:64,height:64,depth:64,texture:"warp-to-ycraft",isStatic:!0,isSensor:!0,exit:{world:"YCraft",position:{x:0,y:0}},position:{x:0,y:-210,z:32}}),n.createEntity({type:"TEXT",text:"Warp To YCraft World",width:164,color:0,style:{fontSize:"16px",textAlign:"center",paddingLeft:"20px"},body:!1,position:{x:-20,y:-220,z:64}}),n.createEntity({type:"TEXT",text:"CSSGraphics Engine",width:20,color:0,style:{width:"150px",fontSize:"12px",textAlign:"center",color:"black",opacity:.22},body:!1,position:{x:-63,y:-16,z:-2}}),n.createEntity({type:"DOOR",body:!0,isStatic:!0,collisionStart:!0,texture:{sheet:"loz_spritesheet",sprite:"ayyoDoor"},width:16,height:16,position:{x:55,y:71,z:10}}),n.createEntity({type:"DOOR",texture:{sheet:"loz_spritesheet",sprite:"ayyoDoor"},width:16,height:16,body:!0,isStatic:!0,collisionStart:!0,position:{x:-55,y:71,z:10}}),n.createEntity({type:"WARP",exit:{world:"Music"},width:64,height:64,depth:64,texture:"warp-to-music",isStatic:!0,isSensor:!0,position:{x:-250,y:0,z:32}}),n.createEntity({type:"TEXT",width:100,text:"Warp To Music World",color:0,style:{width:"100px",fontSize:"16px",textAlign:"center"},body:!1,position:{x:-250,y:-30,z:64}}),n.createEntity({type:"TEXT",text:"Warp To Platform World",color:0,width:120,height:200,style:{width:"120px",fontSize:"16px",textAlign:"center"},body:!1,position:{x:250,y:20,z:64}}),n.createEntity({type:"WARP",exit:{world:"Platform"},width:64,height:64,depth:64,texture:"warp-to-platform",isStatic:!0,isSensor:!0,position:{x:250,y:0,z:32}}),n.createEntity({type:"WARP",exit:{world:"GravityGardens"},width:64,height:64,depth:64,isStatic:!0,isSensor:!0,position:{x:250,y:250,z:32}}),n.createEntity({type:"TEXT",width:80,text:"Gravity Gardens",color:0,style:{width:"100px",fontSize:"16px",textAlign:"center"},body:!1,position:{x:240,y:280,z:32}}),n.createEntity({type:"NOTE",color:13434624,width:32,height:32,depth:16,isStatic:!0,position:{x:-120,y:-200,z:32}});[].forEach(function(t,e){n.createEntity({type:t.toUpperCase(),kind:t,width:16,height:16,depth:32,texture:{sheet:"loz_spritesheet",sprite:t},position:{x:32*e-100,y:150,z:32}})})}},{key:"unload",value:function(){}}])&&u(e.prototype,n),o&&u(e,o),Object.defineProperty(e,"prototype",{writable:!1}),t}();c(t,"id","world-home"),c(t,"type","world"),n.default=t},{"./sutras.js":32,"./welcomeMessage.js":34}],32:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var t=e.createSutra(),n=(t.use((0,s.default)(e),"movement"),(0,o.default)(e));return t.use(n,"switchGraphics"),t.use((0,r.default)(e,{route:i.default.createRectangleRoute(-50,-150,200,-150),tolerance:5}),"walker"),t.on("playNote",function(t){return e.playNote(t.note)}),t.use((0,a.default)(e),"fire"),t.use((0,u.default)(e),"block"),t.use((0,c.default)(e),"demon"),t.use((0,l.default)(e),"bomb"),t};var o=f(t("../sutras/switchGraphics.js")),r=f(t("../TowerDefense/sutras/walker.js")),i=f(t("../sutras/routing.js")),a=f(t("../../mantra-sutras/fire.js")),u=f(t("./sutras/block.js")),c=f(t("../../mantra-sutras/demon.js")),s=(f(t("../../mantra-sutras/hexapod.js")),f(t("../../mantra-sutras/player-movement/top-down.js"))),l=f(t("../../mantra-sutras/bomb.js"));function f(t){return t&&t.__esModule?t:{default:t}}},{"../../mantra-sutras/bomb.js":21,"../../mantra-sutras/demon.js":22,"../../mantra-sutras/fire.js":23,"../../mantra-sutras/hexapod.js":26,"../../mantra-sutras/player-movement/top-down.js":29,"../TowerDefense/sutras/walker.js":53,"../sutras/routing.js":59,"../sutras/switchGraphics.js":60,"./sutras/block.js":33}],33:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(i){var t=i.createSutra();return t.addCondition("playerTouchedBlock",function(t,e){if("COLLISION"===t.type&&"START"===t.kind)return"PLAYER"===t.bodyA.type&&"BLOCK"===t.bodyB.type||"BLOCK"===t.bodyB.type&&"PLAYER"===t.bodyA.type||void 0}),t.addCondition("bulletTouchedBlock",function(t,e){if("COLLISION"===t.type&&"START"===t.kind)return"BULLET"===t.bodyA.type&&"BLOCK"===t.bodyB.type||"BLOCK"===t.bodyB.type&&"BULLET"===t.bodyA.type||void 0}),t.if("bulletTouchedBlock").then("playNote",{note:"C4"}),i.on("pointerDown",function(t,e){var n,o,r;"BLOCK"===t.type&&"Tile"===t.kind&&(i.playNote("C2"),n=t.width/2,o=t.height/2,n=e.offsetX-n,e=e.offsetY-o,r=o=0,Math.abs(n)>Math.abs(e)?o=0<n?-32:32:r=0<e?-32:32,i.applyPosition(t.id,{x:o,y:r}))}),t}},{}],34:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){var e,n,o;!0!==t.hasShownWelcomeMessage?(t.hasShownWelcomeMessage=!0,"undefined"==typeof window?console.log("welcomeMessage only runs on client"):(e=Math.floor(window.innerWidth/15)+"px",n=Math.floor(window.innerWidth/2),o=110,("ontouchstart"in window||0<navigator.maxTouchPoints||0<navigator.msMaxTouchPoints)&&(o=30),(t=t.systems["typer-ghost"].createQueuedText({x:n,y:o,style:{color:"white",fontSize:e,width:"100%",textShadow:"-2px -2px 0 #000, 2px -2px 0 #000, -2px 2px 0 #000, 2px 2px 0 #000",position:"absolute",textAlign:"center",top:"0px",left:"50%",transform:"translateX(-50%)",lineHeight:"1",zIndex:"999"},duration:5e3,removeDuration:6e3})).queueText("Welcome to Mantra Worlds",5e3,2e3),t.queueText("Use WASD to move",5e3,3e3),t.queueText("Click objects to interact",5e3,3e3),t.queueText("Zoom with Slider or Mouse Wheel",5e3,3e3),t.queueText("Press START to Switch Worlds",5e3,2e3),t.queueText("Press SELECT to Open Menu",5e3,2e3),t.queueText("USB Gamepad Support",5e3,2e3),t.processQueue())):console.log("welcomeMessage already run once")}},{}],35:[function(t,e,n){"use strict";function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,a(o.key),o)}}function i(t,e,n){(e=a(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}function a(t){t=function(t,e){if("object"!=o(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===e?String:Number)(t);n=n.call(t,e||"default");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"==o(t)?t:String(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var u=function(){function t(){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.id=t.id}var e,n,o;return e=t,(n=[{key:"init",value:function(t){this.game=t,this.createWorld()}},{key:"createWorld",value:function(){var t=this.game;t.setGravity(0,0,0),t.createDefaultPlayer({position:{x:0,y:0,z:0}}),t.setBackground("#007fff"),t.use("Block"),t.use("Border",{autoBorder:!0}),t.use("Bullet"),t.use("Tone"),t.use("Tile")}},{key:"createHallwayWalls",value:function(t){for(var e=0;e<64;e+=32)t.createEntity({type:"WALL",isStatic:!0,width:32,height:100,rotation:Math.PI/2,position:{x:e,y:-50,z:0}});for(var n=0;n<64;n+=32)t.createEntity({type:"WALL",isStatic:!0,width:32,height:100,rotation:-Math.PI/2,position:{x:n,y:50,z:0}})}}])&&r(e.prototype,n),o&&r(e,o),Object.defineProperty(e,"prototype",{writable:!1}),t}();i(u,"id","world-maze"),i(u,"type","maze"),n.default=u},{}],36:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=o(t("./instruments/createPiano.js")),i=o(t("./instruments/createDrumKit.js")),a=(o(t("../../mantra-sutras/player-movement/top-down.js")),o(t("./sutras.js")));function o(t){return t&&t.__esModule?t:{default:t}}function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,l(o.key),o)}}function s(t,e,n){(e=l(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}function l(t){t=function(t,e){if("object"!=u(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===e?String:Number)(t);n=n.call(t,e||"default");if("object"!=u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"==u(t)?t:String(t)}t=function(){function t(){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.id=t.id}var e,n,o;return e=t,(n=[{key:"init",value:function(t){(this.game=t).reset(),this.createWorld()}},{key:"createWorld",value:function(){var t=this.game;t.setSize(2200,600),t.setGravity(0,0,0),t.isTouchDevice()?t.zoom(1.44):t.zoom(2.5),t.createPlayer({texture:{sheet:"loz_spritesheet",sprite:"player"},position:{x:352,y:80}}),t.customMovement=!1,t.setBackground("black"),t.createEntity({type:"TEXT",text:"Click or Jump on the Piano",style:{fontSize:"16px",color:"#ffffff",textAlign:"center"},body:!1,position:{x:352,y:150,z:64}}),(0,r.default)(t,{position:{x:-200,y:200},width:1028,height:64}),(0,i.default)(t,{position:{x:1e3,y:150}}),t.use("Block"),t.use("Tone"),t.use("Boomerang"),t.use("Bullet"),t.use("Border",{autoBorder:!0}),t.rules;t.useSutra((0,a.default)(t),"MUSIC"),t.createEntity({type:"WARP",exit:{world:"Home"},texture:"warp-to-home",width:64,height:64,isStatic:!0,position:{x:200,y:-10,z:0}}),t.createEntity({type:"TEXT",text:"Warp To Mantra",style:{padding:"2px",fontSize:"16px",color:"#ffffff",textAlign:"center"},body:!1,position:{x:195,y:-20}}),t.createEntity({type:"PLATFORM",width:200,height:16,isStatic:!0,position:{x:1e3,y:210}})}},{key:"update",value:function(){}},{key:"render",value:function(){}},{key:"destroy",value:function(){}}])&&c(e.prototype,n),o&&c(e,o),Object.defineProperty(e,"prototype",{writable:!1}),t}();s(t,"id","world-music"),s(t,"type","world"),n.default=t},{"../../mantra-sutras/player-movement/top-down.js":29,"./instruments/createDrumKit.js":37,"./instruments/createPiano.js":38,"./sutras.js":39}],37:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(o,r){[{type:"kick",color:16777215,width:25,height:25,position:{x:0,y:12.5}},{type:"snare",color:16777215,width:15,height:15,position:{x:0,y:-12.5}},{type:"hiHatClosed",color:16777215,width:10,height:10,position:{x:-15,y:-7.5}},{type:"hiHatOpen",color:16777215,width:10,height:10,position:{x:-15,y:7.5}},{type:"tomLow",color:16777215,width:17.5,height:17.5,position:{x:17.5,y:-7.5}},{type:"tomHigh",color:16777215,width:12.5,height:12.5,position:{x:17.5,y:7.5}}].forEach(function(t){var e=r.position.x+t.position.x,n=r.position.y+t.position.y;o.createEntity({type:"DRUM",kind:t.type,color:t.color,width:t.width,height:t.height,isStatic:!0,position:{x:e,y:n}})})}},{}],38:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(o,r){for(var t=["C","D","E","F","G","A","B"],i=["C#","D#","F#","G#","A#"],a=r.position.x,u=r.width/52,c=u/2.5,s=r.height,l=s/2,e=0;e<8;e++)!function(n){t.forEach(function(t,e){o.createEntity({type:"NOTE",kind:t+n,color:16777215,style:{borderRadius:"0px"},width:u,height:s,isStatic:!0,position:{x:a,y:r.position.y}}),a+=u,"E"!==t&&"B"!==t&&o.createEntity({type:"NOTE",kind:i[e]+n,color:16711680,width:c,height:l,isStatic:!0,style:{border:"solid",zIndex:9999,borderRadius:"0px"},position:{x:a-c,y:r.position.y-l/2,z:9990}})})}(e)}},{}],39:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(n){var e=n.createSutra();return e.addCondition("isTile",function(t){return"BLOCK"===t.type}),e.addCondition("entityTouchedNote",function(t,e){if("COLLISION"===t.type&&"START"===t.kind)return"NOTE"===t.bodyA.type||"NOTE"===t.bodyB.type||void 0}),e.on("damageEntity",function(t){t="FIRE"===t.bodyA.type?t.bodyB:t.bodyA;console.log("damageEntity",t),n.removeEntity(t.id)}),e.if("entityTouchedNote").then("playNote").then("updateNoteColor"),e.on("playNote",function(t){var e;t.kind&&(e=t.kind),t.note&&(e=t.note),t.NOTE&&(e=t.NOTE.kind),n.playNote(e)}),e.on("updateNoteColor",function(t){var e=t.NOTE||t;r[e.id]?(clearTimeout(r[e.id].timer),n.updateEntity({id:e.id,color:r[e.id].originalColor})):r[e.id]={originalColor:e.color},n.updateEntity({id:e.id,color:13434624}),r[e.id].timer=setTimeout(function(){n.updateEntity({id:e.id,color:r[e.id].originalColor})},222)}),console.log("created sutra",e.toEnglish()),n.on("pointerDown",function(t){"NOTE"!==t.type&&"piano-roll-text"!==t.name||(n.playNote(t.kind),e.emit("updateNoteColor",t),o=!0),"DRUM"===t.type&&n.playDrum(t.kind)}),n.on("pointerMove",function(t){o&&"NOTE"===t.type&&(n.playNote(t.kind),e.emit("updateNoteColor",t))}),n.on("pointerUp",function(t){o=!1}),e};(n=t("../sutras/switchGraphics.js"))&&n.__esModule;var o=!1,r={}},{"../sutras/switchGraphics.js":60}],40:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;(t=t("../../mantra-sutras/player-movement/platform.js"))&&t.__esModule;function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,a(o.key),o)}}function i(t,e,n){(e=a(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}function a(t){t=function(t,e){if("object"!=o(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===e?String:Number)(t);n=n.call(t,e||"default");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"==o(t)?t:String(t)}t=function(){function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.game=t,this.id=e.id,this.type=e.type}var t,n,o;return t=e,(n=[{key:"init",value:function(t){(this.game=t).data.camera.mode="platform",this.createWorld()}},{key:"unload",value:function(){}},{key:"createWorld",value:function(){var n=this.game;function t(t){n.createEntity({type:"PLATFORM",isStatic:!0,width:t.width,height:t.height,style:{display:"none"},position:{x:t.x,y:t.y,z:t.z}})}n.reset("platform"),n.setGravity(0,3.3,0),n.isTouchDevice()?n.setZoom(3):n.setZoom(2.5),n.createPlayer({height:32,width:32,texture:{sheet:"blackMage",sprite:"playerRight"},position:{x:10,y:-100}}),n.use("Platform"),n.use("Sword"),t({x:185,y:-74,z:-10,color:16711680,width:16,height:16}),t({x:201,y:-74,z:-10,color:16711680,width:16,height:16}),t({x:200,y:13,z:-10,width:850,height:60}),t({x:925,y:10,z:-10,width:600,height:60});var e=n.rules;e.addCondition("isTile",function(t){return"BLOCK"===t.type}),e.on("ZOOM_IN",function(){var t=n.data.camera.currentZoom||1;n.setZoom(t+.05)}),e.on("ZOOM_OUT",function(){var t=n.data.camera.currentZoom||1;n.setZoom(t-.05)}),n.createEntity({type:"WARP",exit:{world:"Home"},texture:"warp-to-home",width:64,height:64,depth:1,isStatic:!0,position:{x:-100,y:-100}}),n.createEntity({type:"TEXT",text:"Warp To Mantra",width:120,color:16777215,style:{color:"#ffffff",padding:"2px",paddingLeft:"10px",fontSize:"16px",textAlign:"center",backgroundColor:"transparent"},body:!1,position:{x:-105,y:-110}}),n.on("plugin::ready::Platform",function(){n.systems.platform.kinds.forEach(function(t){})}),n.use("Bullet"),n.createEntity({type:"BACKGROUND",texture:"smb3-1-1",width:2816,height:433,body:!1,position:{x:1408,y:-216.5,z:-8}});["arrow","sword","lantern","fire","bomb"].forEach(function(t,e){n.createEntity({type:t.toUpperCase(),kind:t,width:16,height:16,depth:32,texture:{sheet:"loz_spritesheet",sprite:t},position:{x:150+32*e,y:-100,z:32}})})}},{key:"update",value:function(){}},{key:"render",value:function(){}},{key:"destroy",value:function(){}}])&&r(t.prototype,n),o&&r(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();i(t,"id","world-platform"),i(t,"type","world"),n.default=t},{"../../mantra-sutras/player-movement/platform.js":28}],41:[function(t,e,n){"use strict";function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,i(o.key),o)}}function i(t){t=function(t,e){if("object"!=o(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===e?String:Number)(t);n=n.call(t,e||"default");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"==o(t)?t:String(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a,u,c,s=function(){function n(){var t=this,e=n;if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");this.averageSnapshotSize=null,this.displayElement=null,this.id=n.id}var t,e,o;return t=n,(e=[{key:"init",value:function(e){this.game=e,this.game.addSystem(this.id,this);var n=e.width/3*-1;e.on("player::joined",function(t){console.log("a player has joined the server",t);t=e.createEntity({id:t.id,type:"PLAYER",shape:"rectangle",restitution:0,mass:9e4,height:300,width:40,friction:0,frictionAir:0,frictionStatic:0,lockedProperties:{position:{x:n}}});e.emit("player::created",t)}),this.createBorder(),this.createBall()}},{key:"update",value:function(){}},{key:"createBall",value:function(){this.game.createEntity({id:"game-ball",type:"BALL",x:0,y:500,height:50,width:50,velocity:{x:8,y:8},maxSpeed:20,restitution:2.5,friction:0,frictionAir:0,frictionStatic:0})}},{key:"createBorder",value:function(){var t,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=200,o={top:{position:{x:0,y:-600},size:{width:2400,height:n}},bottom:{position:{x:0,y:600},size:{width:2400,height:n}},left:{position:{x:-1100,y:0},size:{width:n,height:1e3}},right:{position:{x:1100,y:0},size:{width:n,height:1e3}}};for(t in o){var r=o[t];void 0===e.id&&(e.id="border"),this.game.createEntity({name:e.id+"-"+t,type:"BORDER",shape:"rectangle",isStatic:!0,position:{x:r.position.x,y:r.position.y},width:r.size.width,height:r.size.height,depth:80})}}}])&&r(t.prototype,e),o&&r(t,o),Object.defineProperty(t,"prototype",{writable:!1}),n}();a=s,c="world-pong",(u=i(u="id"))in a?Object.defineProperty(a,u,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[u]=c,n.default=s},{}],42:[function(t,e,n){"use strict";function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,a(o.key),o)}}function i(t,e,n){(e=a(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}function a(t){t=function(t,e){if("object"!=o(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===e?String:Number)(t);n=n.call(t,e||"default");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"==o(t)?t:String(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var u=function(){function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.game=t,this.id=e.id,this.type=e.type}var t,n,o;return t=e,(n=[{key:"init",value:function(t){this.game=t,this.createWorld()}},{key:"createWorld",value:function(){var t=this.game;t.use("Bullet"),t.systemsManager.removeSystem("entity-input"),t.systemsManager.removeSystem("entity-movement"),t.use("PhysXPhysics"),t.use("EntityInput"),t.use("EntityMovement"),t.use("Block"),t.use("Editor",{sourceCode:"https://github.com/yantra-core/mantra/blob/master/mantra-client/public/examples/offline/physx-babylon.html"}),t.systems.graphics.switchGraphics("BabylonGraphics",function(){t.createEntity({type:"BLOCK",width:500,height:500,depth:200,position:{x:0,y:-500}}),t.use("Border",{autoBorder:!0}),t.use("StarField"),t.createDefaultPlayer()})}},{key:"update",value:function(){}},{key:"render",value:function(){}},{key:"destroy",value:function(){}}])&&r(t.prototype,n),o&&r(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();i(u,"id","world-space"),i(u,"type","world"),n.default=u},{}],43:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=u(t("../../mantra-sutras/demon.js")),r=u(t("../../mantra-sutras/hexapod.js")),i=u(t("../../mantra-sutras/note.js")),a=u(t("../../mantra-sutras/fire.js")),t=u(t("../../mantra-sutras/game-of-life.js"));function u(t){return t&&t.__esModule?t:{default:t}}function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,f(o.key),o)}}function l(t,e,n){(e=f(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}function f(t){t=function(t,e){if("object"!=c(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===e?String:Number)(t);n=n.call(t,e||"default");if("object"!=c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"==c(t)?t:String(t)}o.default,r.default,i.default,a.default,t.default;o=function(){function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.game=t,this.id=e.id,this.type=e.type,this.demoInterval=null}var t,n,o;return t=e,(n=[{key:"init",value:function(t){(this.game=t).customMovement=!0,t.reset("topdown"),t.setGravity(0,0,0),t.setZoom(3.5),this.createWorld()}},{key:"createWorld",value:function(){var t=this.game;t.use("Bullet"),t.use("Tone"),t.use("Health"),console.log("hexapod",r.default),t.use("Block",{MIN_BLOCK_SIZE:1e3}),t.useSutra((0,r.default)(t),"HEXAPOD"),t.data.roundEnded=!1,t.data.roundStarted=!0,t.createPlayer(),t.createEntity({name:"sutra-label",type:"TEXT",body:!1,text:"hexapod",position:{x:-100,y:0},style:{fontSize:30,color:"#ffffff"}})}},{key:"update",value:function(){}},{key:"render",value:function(){}},{key:"destroy",value:function(){}},{key:"unload",value:function(){this.demoSutras&&clearInterval(this.demoSutras)}}])&&s(t.prototype,n),o&&s(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();l(o,"id","world-sutra"),l(o,"type","world"),n.default=o},{"../../mantra-sutras/demon.js":22,"../../mantra-sutras/fire.js":23,"../../mantra-sutras/game-of-life.js":25,"../../mantra-sutras/hexapod.js":26,"../../mantra-sutras/note.js":27}],44:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=o(t("./sutras.js"));o(t("./welcomeMessage.js"));function o(t){return t&&t.__esModule?t:{default:t}}function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,c(o.key),o)}}function u(t,e,n){return(e=c(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function c(t){t=function(t,e){if("object"!=i(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===e?String:Number)(t);n=n.call(t,e||"default");if("object"!=i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"==i(t)?t:String(t)}t=function(){function t(){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.id=t.id,this.type=t.type}var e,n,o;return e=t,(n=[{key:"init",value:function(t){this.game=t,this.createWorld()}},{key:"createWorld",value:function(){var n=this.game,e=(n.reset(),n.setZoom(4.5),n.setSize(16e3,9e3),n.setGravity(0,0,0),n.config.useFoV=!0,n.data.fieldOfView=96,n.createPlayer({texture:{sheet:"loz_spritesheet",sprite:"player"},position:{x:0,y:0,z:1}}),n.setBackground("#000000"),n.use("Block"),n.use("Border",{autoBorder:!0}),n.use("Bullet"),n.use("Tile",{loadInitialChunk:!0,tiledServer:!0,tileSize:16,chunkUnitSize:8,proceduralGenerateMissingChunks:!1,lazyLoadTiles:!1,loadDefaultTileMap:!1}),n.use("Tone"),n.rules),t=(e.addCondition("PLAYER_UP",{op:"or",conditions:["W","DPAD_UP"]}),e.addCondition("PLAYER_DOWN",{op:"or",conditions:["S","DPAD_DOWN"]}),e.addCondition("PLAYER_LEFT",{op:"or",conditions:["A","DPAD_LEFT"]}),e.addCondition("PLAYER_RIGHT",{op:"or",conditions:["D","DPAD_RIGHT"]}),e.addCondition("USE_ITEM_1",{op:"or",conditions:["SPACE","H","BUTTON_X"]}),e.if("PLAYER_UP").then("MOVE_UP").then("updateSprite",{sprite:"playerUp"}),e.if("PLAYER_LEFT").then("MOVE_LEFT").then("updateSprite",{sprite:"playerLeft"}),e.if("PLAYER_DOWN").then("MOVE_DOWN").then("updateSprite",{sprite:"playerDown"}),e.if("PLAYER_RIGHT").then("MOVE_RIGHT").then("updateSprite",{sprite:"playerRight"}),e.if("USE_ITEM_1").then("FIRE_BULLET").map("determineShootingSprite").then("updateSprite"),e.if("K").if("canDropBomb").then("DROP_BOMB"),e.if("O").then("ZOOM_IN"),e.if("P").then("ZOOM_OUT"),e.addMap("determineShootingSprite",function(t,e){var n=t.rotation%(2*Math.PI),o=u(u(u({0:"playerRodUp"},Math.PI/2,"playerRodRight"),Math.PI,"playerRodDown"),-Math.PI/2,"playerRodLeft");return t.texture.sprite=o[n]||t.currentSprite,t}),e.on("updateSprite",function(t,e){e=e.data.sprite||t.texture.sprite;n.updateEntity({id:t.id,texture:{frameIndex:0,sheet:t.texture.sheet,sprite:e,animationPlaying:!0}})}),e.on("FIRE_BULLET",function(t){n.systems.bullet.fireBullet(t.id)}),e.on("DROP_BOMB",function(t){e.emit("dropBomb",t)}),e.on("ZOOM_IN",function(){var t=n.data.camera.currentZoom||1;n.setZoom(t+.05)}),e.on("ZOOM_OUT",function(){var t=n.data.camera.currentZoom||1;n.setZoom(t-.05)}),n.useSutra((0,r.default)(n),"TILED"),n.createEntity({name:"sutra-tree",type:"BACKGROUND",width:256,height:256,depth:1,texture:"sutra-tree",body:!1,position:{x:0,y:300,z:32}}),e.toEnglish());n.createEntity({name:"sutra-tree-text",type:"TEXT",text:"Sutra Rules \n\n"+t,width:256,height:256,depth:1,body:!1,style:{whiteSpace:"pre",textAlign:"left",color:"black",opacity:.55},position:{x:40,y:550,z:32}})}},{key:"unload",value:function(){}}])&&a(e.prototype,n),o&&a(e,o),Object.defineProperty(e,"prototype",{writable:!1}),t}();u(t,"id","world-home"),u(t,"type","world"),n.default=t},{"./sutras.js":45,"./welcomeMessage.js":46}],45:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var t=e.createSutra(),n=(t.use((0,i.default)(e),"movement"),(0,r.default)(e)),n=(t.use(n,"switchGraphics"),(0,o.default)(e));return t.use(n,"warpToWorld"),t.on("playNote",function(t){return e.playNote(t.note)}),t.use((0,a.default)(e),"bomb"),t};var o=u(t("../sutras/warpToWorld.js")),r=u(t("../sutras/switchGraphics.js")),i=(u(t("../TowerDefense/sutras/walker.js")),u(t("../sutras/routing.js")),u(t("../../mantra-sutras/fire.js")),u(t("../../mantra-sutras/demon.js")),u(t("../../mantra-sutras/hexapod.js")),u(t("../../mantra-sutras/player-movement/top-down.js"))),a=u(t("../../mantra-sutras/bomb.js"));function u(t){return t&&t.__esModule?t:{default:t}}},{"../../mantra-sutras/bomb.js":21,"../../mantra-sutras/demon.js":22,"../../mantra-sutras/fire.js":23,"../../mantra-sutras/hexapod.js":26,"../../mantra-sutras/player-movement/top-down.js":29,"../TowerDefense/sutras/walker.js":53,"../sutras/routing.js":59,"../sutras/switchGraphics.js":60,"../sutras/warpToWorld.js":61}],46:[function(t,e,n){arguments[4][34][0].apply(n,arguments)},{dup:34}],47:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var c=o(t("./sutras/round.js")),s=o(t("./sutras/player.js")),l=o(t("./sutras/colorChanges.js")),f=o(t("./sutras/enemy.js")),y=o(t("./sutras/input.js"));function o(t){return t&&t.__esModule?t:{default:t}}function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,u(o.key),o)}}function a(t,e,n){(e=u(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}function u(t){t=function(t,e){if("object"!=r(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===e?String:Number)(t);n=n.call(t,e||"default");if("object"!=r(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"==r(t)?t:String(t)}t=function(){function t(){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");a(this,"sutras",{round:{description:"Round Logic. Adds conditions and actions related to the round."},spawner:{description:"Spawner Logic. Adds conditions and actions related to the spawner."},player:{description:"Player Logic. Adds conditions and actions related to the player."},collision:{description:"Collision Logic. Adds conditions and actions related to collisions."},colorChanges:{description:"Color Changes Logic. Adds conditions and actions related to color changes."}}),a(this,"entities",{UnitSpawner:{type:"UnitSpawner",health:100,position:{x:0,y:0},width:100,height:100,color:65280}}),this.id=t.id}var e,n,o;return e=t,(n=[{key:"init",value:function(t){for(var e in this.game=t,this.sutras)this[e]&&(this.sutras[e]=this[e]());t.customMovement=!0,t.reset(),t.setGravity(0,0,0),t.createPlayer({position:{x:0,y:0},texture:"none"}),t.setBackground("#007fff"),t.use("Block"),t.use("Border",{autoBorder:!0,thickness:20,health:100}),t.use("Bullet"),t.use("Border"),t.use("StarField");var n=c.default.call(this),o=f.default.call(this),r=s.default.call(this),i=y.default.call(this),a=l.default.call(this),u=t.createSutra();return u.addCondition("isBorder",function(t){return"BORDER"===t.type}),u.if("roundNotPaused").if("roundNotRunning").then("createBorders").then("spawnEnemyUnits").then("startRound"),u.if("blockHitWall").then("damageWall").then("removeBlock"),u.if("playerHealthBelow0").then("resetPlayerPosition"),u.if("blockHitPlayer").then(function(t){t.if("blockIsRed").then("damagePlayer").else("healPlayer")}).then("removeBlock"),u.if("roundRunning").if("allWallsFallen").then("roundLost"),u.addCondition("allWallsFallen",function(t,e){e.height;var e=e.ents.UnitSpawner,n=!1;return e.forEach(function(t){4200<t.position.y&&(n=!0)}),n}),u.use(n,"round"),u.use(o,"spawner"),u.use(r,"player"),u.use(a,"colorChanges"),u.use(i,"input"),this.createAdditionalRules(u),console.log(u),t.useSutra(u,"TowerDefense"),t.data.roundStarted=!0,t.data.roundRunning=!1,u}},{key:"update",value:function(){}},{key:"render",value:function(){}},{key:"destroy",value:function(){}},{key:"createBorders",value:function(t){for(var e=this.game,n=0;n<t;n++){var o=.2*(n+1);e.systems.border.createBorder({height:e.height*o+e.height,width:e.width*o+e.width,thickness:20,health:100})}}},{key:"createAdditionalRules",value:function(t){var o=this.game,n=this;t.addCondition("blockHitWall",function(t,e){if("COLLISION"===t.type&&!("BORDER"!==t.bodyA.type&&"BORDER"!==t.bodyB.type||"BLOCK"!==t.bodyA.type&&"BLOCK"!==t.bodyB.type))return!0}),t.on("removeBlock",function(t,e){t=t.BLOCK;o.removeEntity(t.id)}),t.on("damageWall",function(t,e){t=t.BORDER;--t.health,t.health<=0?o.removeEntity(t.id):o.updateEntity({id:t.id,type:"BORDER",health:t.health})}),t.addCondition("blockHitPlayer",function(t,e){if("COLLISION"===t.type&&!("PLAYER"!==t.bodyA.type&&"PLAYER"!==t.bodyB.type||"BLOCK"!==t.bodyA.type&&"BLOCK"!==t.bodyB.type))return!0}),t.addCondition("blockIsRed",function(t,e){t="BLOCK"===t.bodyA.type?t.bodyA:t.bodyB;if("BLOCK"===t.type&&16711680===t.color)return!0}),t.on("entity::updateEntity",function(t,e){o.updateEntity(t)}),t.on("createBorders",function(t,e){n.createBorders(2)}),t.on("roundLost",function(t,e,n){o.data.roundStarted=!1,o.data.roundRunning=!1,o.data.roundEnded=!0}),t.on("startRound",function(t,e,n){o.data.roundRunning=!0})}}])&&i(e.prototype,n),o&&i(e,o),Object.defineProperty(e,"prototype",{writable:!1}),t}();a(t,"id","world-towerdefense"),a(t,"type","world"),n.default=t},{"./sutras/colorChanges.js":48,"./sutras/enemy.js":49,"./sutras/input.js":50,"./sutras/player.js":51,"./sutras/round.js":52}],48:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){var n=this.game,o=this.game.createSutra(),t=(o.addCondition("changesColorWithDamage",{op:"or",conditions:["isSpawner","isPlayer","isBorder"]}),[100,80,60,40,20]),r=[65280,10092288,16776960,16750848,16711680];return t.forEach(function(t,e){o.addCondition("isHealthBelow".concat(t),{op:"lessThan",property:"health",value:t})}),o.addAction({if:"changesColorWithDamage",then:t.map(function(t,e){return{if:"isHealthBelow".concat(t),then:[{action:"entity::updateEntity",data:{color:r[e]}}]}})}),o.on("entity::updateEntity",function(t,e){n.updateEntity(t)}),o}},{}],49:[function(t,e,n){"use strict";function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e,n){return(e=function(t){t=function(t,e){if("object"!=o(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===e?String:Number)(t);n=n.call(t,e||"default");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"==o(t)?t:String(t)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){var a=this.game,t=this.game.createSutra();t.addCondition("isSpawner",function(t,e){return"UnitSpawner"===t.type});return t.addCondition("moveLeft",function(t,e){return t.position.x>t.startingPosition.x+0}),t.addCondition("moveRight",function(t,e){return t.position.x<=+t.startingPosition.x}),t.addCondition("gameTickMod60",function(t,e){return e.tick%60==0}),t.if("gameTickMod60").if("isSpawner").then("spawnBlock",{x:0,y:100}),t.if("gameTickMod60").if("isSpawner","moveLeft").then("entity::updateEntity",{velocity:{x:-10,y:10}}),t.if("gameTickMod60").if("isSpawner","moveRight").then("entity::updateEntity",{velocity:{x:1,y:10}}),t.on("spawnBlock",function(t,e){a.createEntity({type:"BLOCK",position:{x:t.position.x,y:t.position.y},mass:100,friction:0,frictionAir:0,frictionStatic:0,velocity:{x:0,y:30},width:16,height:16})}),t.on("entity::updateEntity",function(t,e){a.updateEntity({id:t.id,velocity:t.velocity})}),t.addCondition("spawnUnitTouchedHomebase",function(t,e){if("COLLISION"===t.type)return"UnitSpawner"===t.bodyA.type&&"BORDER"===t.bodyB.type||"UnitSpawner"===t.bodyB.type&&"BORDER"===t.bodyA.type||void 0}),t.on("resetSpawnerUnit",function(t,e){var t=t.UnitSpawner,n={type:"UnitSpawner",health:100,position:t.startingPosition,width:64,height:64,color:65280,style:{backgroundColor:"#000000"}};n.startingPosition=t.startingPosition,a.createEntity(n)}),t.on("spawnEnemyUnits",function(t,e){console.log("data",t,e);try{for(var n=[],o=0;o<8;o++){var r=JSON.parse(JSON.stringify(u(u(u(u(u(u({type:"UnitSpawner",health:100,position:{x:0,y:0}},"health",100),"mass",100),"width",64),"height",64),"color",65280),"style",{backgroundColor:"#000000"}))),i=(console.log("spawner",r),.8*a.width);r.position.x=-i/2+i/8*o,r.position.y=-a.height/2+100,r.startingPosition={x:r.position.x,y:r.position.y},n.push(r)}n.forEach(function(t){a.createEntity(t)})}catch(t){console.log("err",t)}}),t.on("removeSpawnUnit",function(t,e,n){"BORDER"===t.bodyA.type&&a.removeEntity(t.bodyB.id),"BORDER"===t.bodyB.type&&a.removeEntity(t.bodyA.id)}),t}},{}],50:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){var n=this.game,t=this.game.createSutra();return t.addCondition("PLAYER_UP",{op:"or",conditions:["W","DPAD_UP"]}),t.addCondition("PLAYER_DOWN",{op:"or",conditions:["S","DPAD_DOWN"]}),t.addCondition("PLAYER_LEFT",{op:"or",conditions:["A","DPAD_LEFT"]}),t.addCondition("PLAYER_RIGHT",{op:"or",conditions:["D","DPAD_RIGHT"]}),t.addCondition("USE_ITEM_1",{op:"or",conditions:["SPACE","H","BUTTON_B"]}),t.addCondition("USE_ITEM_2",{op:"or",conditions:["J","BUTTON_X"]}),t.addCondition("ZOOM_IN",{op:"or",conditions:["K","BUTTON_A"]}),t.addCondition("ZOOM_OUT",{op:"or",conditions:["L","BUTTON_Y"]}),t.if("PLAYER_UP").then("MOVE_UP"),t.if("PLAYER_LEFT").then("MOVE_LEFT"),t.if("PLAYER_DOWN").then("MOVE_DOWN"),t.if("PLAYER_RIGHT").then("MOVE_RIGHT"),t.if("USE_ITEM_1").then("FIRE_BULLET").map("determineShootingSprite").then("updateSprite"),t.on("FIRE_BULLET",function(t){n.systems.bullet.fireBullet(t.id)}),t.on("SWING_SWORD",function(t){n.systems.sword.swingSword(t.id)}),t.on("CAMERA_SHAKE",function(t){n.shakeCamera(1e3)}),t.on("ZOOM_IN",function(t){var e=n.data.camera.currentZoom||1;n.setZoom(e+.05)}),t.on("ZOOM_OUT",function(t){var e=n.data.camera.currentZoom||1;n.setZoom(e-.05)}),t.on("PLAYER_UP",function(t){n.applyForce(t.id,{x:0,y:.05*-o})}),t.on("PLAYER_LEFT",function(t){n.applyForce(t.id,{x:.05*-o,y:0})}),t.on("PLAYER_RIGHT",function(t){n.applyForce(t.id,{x:.05*o,y:0})}),t.on("PLAYER_DOWN",function(t){n.applyForce(t.id,{x:0,y:.05*o})}),console.log("creating input sutra",t),t};var o=5},{}],51:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){var n=this.game,t=this.game.createSutra();return t.addCondition("isPlayer",function(t){return"PLAYER"===t.type}),t.addCondition("playerHealthBelow0",function(t,e){if("PLAYER"===t.type&&t.health<=0)return!0}),t.on("resetPlayerPosition",function(t,e){n.updateEntity({id:t.id,position:{x:0,y:0},velocity:{x:0,y:0},health:100,color:65280,score:0})}),t.on("damagePlayer",function(t,e){t.BLOCK;t=t.PLAYER;t.health-=10,n.updateEntity({id:t.id,health:t.health})}),t.on("healPlayer",function(t,e){t.BLOCK;t=t.PLAYER;t&&(t.health+=5,n.updateEntity({id:t.id,health:t.health}))}),t}},{}],52:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){var t=this.game.createSutra();return t.addCondition("roundStarted",function(t,e){return console.log("roundStarted",e.roundStarted),!0===e.roundStarted}),t.addCondition("roundEnded",function(t,e){return!0===e.roundEnded}),t.addCondition("roundRunning",function(t,e){return!0===e.roundRunning}),t.addCondition("roundNotRunning",function(t,e){return!1===e.roundRunning}),t.addCondition("roundPaused",function(t,e){return!0===e.roundPaused}),t.addCondition("roundNotPaused",function(t,e){return!0!==e.roundPaused}),t.on("roundLost",function(t,e,n){console.log("roundLost!!!"),n.roundStarted=!1,n.roundRunning=!1,n.roundEnded=!0,n.roundPaused=!0}),t.on("startRound",function(t,e,n){console.log("startRound",e),n.roundRunning=!0,n.roundEnded=!1}),t}},{}],53:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(r,t){r.createEntity({type:"Walker",width:22,height:24,texture:{sheet:"jogurt",sprite:"walkLeft"},depth:64,position:{x:50,y:-150,z:32}});var i=r.createSutra();return i.route=t.route,i.routeIndex=0,i.target=i.route[i.routeIndex],i.tolerance=t.tolerance||5,i.addCondition("isWalker",function(t){return"Walker"===t.type}),i.addCondition("atTarget",function(t){var e=t.position.x-i.target[0],t=t.position.y-i.target[1];return Math.sqrt(e*e+t*t)<i.tolerance}),i.on("nextWaypoint",function(t){i.routeIndex<i.route.length-1?i.routeIndex++:i.routeIndex=0,i.target=i.route[i.routeIndex]}),i.if("isWalker").if("atTarget").then("nextWaypoint"),i.if("isWalker").then("entity::updateEntity"),i.on("entity::updateEntity",function(t){var e=i.target[0]-t.position.x,n=i.target[1]-t.position.y,o=Math.sqrt(e*e+n*n);r.updateEntity({id:t.id,velocity:{x:0<o?e/o:0,y:0<o?n/o:0}})}),i}},{}],54:[function(t,e,n){"use strict";function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,a(o.key),o)}}function i(t,e,n){(e=a(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}function a(t){t=function(t,e){if("object"!=o(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===e?String:Number)(t);n=n.call(t,e||"default");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"==o(t)?t:String(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var u=function(){function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.game=t,this.id=e.id,this.type=e.type}var t,n,o;return t=e,(n=[{key:"init",value:function(t){this.game=t,this.createWorld()}},{key:"createWorld",value:function(){var t=this.game;t.setGravity(0,0,0),t.use("Bullet"),t.use("Health"),t.use("Block"),t.use("StarField"),t.on("plugin::ready::XState",function(){t.createDefaultPlayer(),t.systems.xstate.loadEntities()}),t.use("XState",{world:{id:"bossFightGame",world:{width:800,height:600},entities:{boss:{type:"NPC",position:{x:-200,y:-600},height:600,width:600,health:1e3}},stateMachine:{id:"bossFightGame",initial:"Idle",context:{name:"boss",health:1e3},states:{Idle:{on:{START:"Active"}},Active:{on:{"entity::damage":{target:"UpdateEntity",cond:"isBossDamaged"},ENTITY_DESTROYED:{target:"Victory",cond:"isBossDefeated"}}},UpdateEntity:{on:{COMPLETE_UPDATE:"Active"},entry:"calculateComponentUpdate"},Victory:{type:"final"}},on:{}},guards:{isBossDamaged:function(t,e){return console.log("isBossDamaged",t,e),e.name===t.name&&"entity::damage"===e.type},isBossDefeated:function(t,e){return console.log("isBossDefeated",t,e),e.name===t.name&&"ENTITY_DESTROYED"===e.type}},actions:{calculateComponentUpdate:function(t,e){t.health-=e.damage;var e=255,n=255,o=0,r=255,i=0,a=0,u=Math.max(t.health,0)/1e3,i=n+(i-n)*(1-u),n=o+(a-o)*(1-u);t.color=Math.round(e+(r-e)*(1-u))<<16|Math.round(i)<<8|Math.round(n)}}}})}},{key:"update",value:function(){}},{key:"render",value:function(){}},{key:"destroy",value:function(){}},{key:"unload",value:function(){this.game.systems.xstate.unload()}}])&&r(t.prototype,n),o&&r(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();i(u,"id","world-xstate"),i(u,"type","world"),n.default=u},{}],55:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=o(t("./contraptions-example.js"));o(t("../../mantra-sutras/player-movement/top-down.js"));function o(t){return t&&t.__esModule?t:{default:t}}function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,c(o.key),o)}}function u(t,e,n){(e=c(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}function c(t){t=function(t,e){if("object"!=i(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===e?String:Number)(t);n=n.call(t,e||"default");if("object"!=i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"==i(t)?t:String(t)}t=function(){function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.game=t,this.id=e.id,this.type=e.type}var t,n,o;return t=e,(n=[{key:"init",value:function(t){this.game=t,this.createWorld()}},{key:"createWorld",value:function(){var t,e=this.game;e.customMovement=!1,e.reset(),e.setGravity(0,0,0),e.setSize(1600,900),e.isTouchDevice()?e.zoom(1.5):e.setZoom(2),e.use("Boomerang"),e.use("Bullet"),e.use("Block"),e.use("YCraft",{contraption:r.default}),e.use("YCraftGUI"),e.createPlayer({texture:{sheet:"loz_spritesheet",sprite:"player"},position:{x:100,y:100}}),e.createEntity({type:"WARP",exit:{world:"Home",position:{x:0,y:0}},width:64,texture:"warp-to-home",isStatic:!0,collisionStart:!0,height:64,position:{x:260,y:60,z:0}}),e.createEntity({type:"TEXT",text:"Warp To Mantra",width:120,color:0,style:{fontSize:"16px",textAlign:"center"},body:!1,position:{x:260,y:60,z:64}}),e.rules;t=e.createSutra(),e.useSutra(t,"YCRAFT");for(var n=0;n<10;n++)e.createEntity({type:"BLOCK",texture:"tile-block",mass:1e4,height:16,width:16,startCollision:!0,position:{x:180,y:0+64*n,z:0},friction:1,frictionAir:1,frictionStatic:1})}},{key:"update",value:function(){}},{key:"render",value:function(){}},{key:"destroy",value:function(){}},{key:"unload",value:function(){console.log("YCraft.unload()")}}])&&a(t.prototype,n),o&&a(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();u(t,"id","world-ycraft"),u(t,"type","world"),n.default=t},{"../../mantra-sutras/player-movement/top-down.js":29,"./contraptions-example.js":56}],56:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){var t=new s.YCraft(0,0,0,{description:"Simple Light",height:100,width:125}),e=new s.Button(25,15,0),n=new s.Latch(25,65,0),o=new s.LEDLight(75,15,25,{wattage:60,height:250,width:250}),o=(e.connect(o),n.connect(o),t.addPart(o),t.addPart(e),t.addPart(n),new s.YCraft(0,140,0,{description:"Wired Light",height:120,width:200})),e=new s.Wire,n=new s.Wire,r=new s.Button(25,25,1),i=new s.Latch(25,75,1),a=new s.Relay(75,50,0),u=new s.LEDLight(125,50,25,{wattage:60,height:250,width:250}),u=(r.connect(e),i.connect(e),e.connect(a),a.connect(n),n.connect(u),o.addPart(u),o.addPart(r),o.addPart(i),o.addPart(a),o.addPart(e),o.addPart(n),new s.YCraft(0,280,0,{description:"Pressure Sensor Wire",height:120,width:200})),r=new s.PressureSensor(25,25,1),i=new s.Wire,a=new s.LEDLight(125,25,25,{wattage:60,height:250,width:250}),e=(r.connect(i),i.connect(a),u.addPart(r),u.addPart(i),u.addPart(a),new s.YCraft(210,140,0,{description:"Security System",height:120,width:200})),n=new s.MotionDetector(25,25,0),r=new s.PressureSensor(25,75,0),i=new s.Actuator(125,50,0),a=new s.LEDLight(175,50,25,{wattage:60,height:250,width:250}),c=new s.Button(25,125,0),n=(n.connect(i),r.connect(i),c.connect(i),i.connect(a),e.addPart(n),e.addPart(r),e.addPart(i),e.addPart(a),e.addPart(c),new s.YCraft),r=(n.addContraption(t),n.addContraption(o),n.addContraption(u),n.addContraption(e),function(t,e,n){var t=new s.YCraft(t,e,n,{description:"Rover Light",powerRequired:!1}),e=new s.Latch(25,25,2),n=new s.Latch(100,25,2),o=new s.LEDLight(0,100,1),r=new s.LEDLight(50,100,1),i=new s.LEDLight(100,100,1),a=new s.Rover(50,25,0,{color:16711680,velocity:{x:-2,y:0}}),u=new s.Wire,c=new s.Wire;return t.addPart(a),e.connect(u),u.connect(o),u.connect(r),u.connect(i),n.connect(c),c.connect(i),t.addPart(e),t.addPart(n),t.addPart(u),t.addPart(c),t.addPart(o),t.addPart(r),t.addPart(i),t.onAny(function(t,e){}),a.start(),t}(-145,145,0));return n.addContraption(r),n};var s=t("../../../YCraft.js/index.js")},{"../../../YCraft.js/index.js":1}],57:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"worlds",{enumerable:!0,get:function(){return o.default}});var o=(n=t("./index.js"))&&n.__esModule?n:{default:n}},{"./index.js":58}],58:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=p(t("./Home/Home.js")),r=p(t("./GravityGardens/GravityGardens.js")),i=p(t("./Maze/Maze.js")),a=p(t("./Music/Music.js")),u=p(t("./Platform/Platform.js")),c=p(t("./Pong/Pong.js")),s=p(t("./Space/Space.js")),l=p(t("./Sutra/Sutra.js")),f=p(t("./Tiled/Tiled.js")),y=p(t("./TowerDefense/TowerDefense.js")),d=p(t("./XState/XState.js")),t=p(t("./YCraft/YCraft.js"));function p(t){return t&&t.__esModule?t:{default:t}}var h={};h.Home=o.default,h.GravityGardens=r.default,h.Maze=i.default,h.Music=a.default,h.Platform=u.default,h.Pong=c.default,h.Space=s.default,h.Sutra=l.default,h.XState=d.default,h.Tiled=f.default,h.TowerDefense=y.default,h.YCraft=t.default,n.default=h},{"./GravityGardens/GravityGardens.js":30,"./Home/Home.js":31,"./Maze/Maze.js":35,"./Music/Music.js":36,"./Platform/Platform.js":40,"./Pong/Pong.js":41,"./Space/Space.js":42,"./Sutra/Sutra.js":43,"./Tiled/Tiled.js":44,"./TowerDefense/TowerDefense.js":47,"./XState/XState.js":54,"./YCraft/YCraft.js":55}],59:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o={createLineRoute:function(t,e,n,o,r){for(var i=[],a=n-t,u=o-e,c=Math.max(Math.abs(a),Math.abs(u))/r,s=0;s<=c;s++)i.push([t+a*s/c,e+u*s/c]);return i},createRectangleRoute:function(t,e,n,o){return[[t,e],[t+n,e],[t+n,e+o],[t,e+o],[t,e]]},createCircleRoute:function(t,e,n,o){for(var r=[],i=0;i<=o;i++){var a=2*Math.PI*i/o;r.push([t+n*Math.cos(a),e+n*Math.sin(a)])}return r}};n.default=o},{}],60:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(r){var t=r.createSutra();return t.addCondition("playerTouchedPhaserGraphics",function(t,e){if("COLLISION"===t.type&&"ACTIVE"===t.kind&&"PhaserGraphics"===t.TEXT.name)return"PLAYER"===t.bodyA.type&&"TEXT"===t.bodyB.type||"TEXT"===t.bodyB.type&&"PLAYER"===t.bodyA.type||void 0}),t.addCondition("playerStoppedTouchedPhaserGraphics",function(t,e){if("COLLISION"===t.type&&"END"===t.kind&&"PhaserGraphics"===t.TEXT.name)return"PLAYER"===t.bodyA.type&&"TEXT"===t.bodyB.type||"TEXT"===t.bodyB.type&&"PLAYER"===t.bodyA.type||void 0}),t.if("playerTouchedPhaserGraphics").then("switchGraphics"),t.if("playerStoppedTouchedPhaserGraphics").then("hideLoader"),t.addCondition("playerTouchedThreeGraphics",function(t,e){if("COLLISION"===t.type&&"ACTIVE"===t.kind)return"PLAYER"===t.bodyA.type&&"TEXT"===t.bodyB.type&&("ThreeGraphics"===t.TEXT.name||"CSSGraphics"===t.TEXT.name)||"TEXT"===t.bodyA.type&&("ThreeGraphics"===t.TEXT.name||"CSSGraphics"===t.TEXT.name)&&"PLAYER"===t.bodyB.type||void 0}),t.addCondition("playerStoppedTouchedThreeGraphics",function(t,e){if("COLLISION"===t.type&&"END"===t.kind&&("ThreeGraphics"===t.TEXT.name||"CSSGraphics"===t.TEXT.name))return"PLAYER"===t.bodyA.type&&"TEXT"===t.bodyB.type||"TEXT"===t.bodyB.type&&"PLAYER"===t.bodyA.type||void 0}),t.if("playerTouchedThreeGraphics").then("switchGraphics"),t.if("playerStoppedTouchedThreeGraphics").then("hideLoader"),t.on("hideLoader",function(t,e,n){i&&i.remove()}),t.on("switchGraphics",function(e,t,n){var o;"number"==typeof e.duration&&(1===e.duration?(i=new r.systems.graphics.LoadingCircle(a),(o={x:(o=e.TEXT.position).x-n.camera.position.x+window.outerWidth/2,y:o.y-n.camera.position.y+window.outerHeight/2}).x+=45,o.y+=255,i.setPosition(o.x,o.y),i.container.addEventListener("loadingComplete",function(t){console.log("Loading complete:",t.detail);t=e.TEXT.name||"PhaserGraphics";r.switchGraphics(t),i.remove()})):i.tick(1/n.FPS*1e3))}),t};var i,a=3e3},{}],61:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var t=e.createSutra();return t.addCondition("playerTouchedWarpZone",function(t,e){if("COLLISION"===t.type&&t.PLAYER&&t.WARP)return!0}),t.if("playerTouchedWarpZone").then("switchWorld"),t.on("switchWorld",function(t){t=t.WARP.kind||"Home";e.switchWorlds(t)}),t}},{}]},{},[57])(57)});
//# sourceMappingURL=worlds.mantra.min.js.map