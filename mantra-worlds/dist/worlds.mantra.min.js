!function(e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).WORLDS=e()}(function(){return function n(o,r,a){function u(t,e){if(!r[t]){if(!o[t]){var i="function"==typeof require&&require;if(!e&&i)return i(t,!0);if(l)return l(t,!0);throw(e=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",e}i=r[t]={exports:{}},o[t][0].call(i.exports,function(e){return u(o[t][1][e]||e)},i,i.exports,n,o,r,a)}return r[t].exports}for(var l="function"==typeof require&&require,e=0;e<a.length;e++)u(a[e]);return u}({1:[function(e,t,i){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,r(n.key),n)}}function r(e){e=function(e,t){if("object"!=n(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0===i)return("string"===t?String:Number)(e);i=i.call(e,t||"default");if("object"!=n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==n(e)?e:String(e)}Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var a,u,l,s=function(){function i(){var e=this,t=i;if(!(e instanceof t))throw new TypeError("Cannot call a class as a function");this.averageSnapshotSize=null,this.displayElement=null,this.id=i.id}var e,t,n;return e=i,(t=[{key:"init",value:function(t){this.game=t,this.game.addSystem(this.id,this);var i=t.width/3*-1;t.on("player::joined",function(e){console.log("a player has joined the server",e);e=t.createEntity({id:e.id,type:"PLAYER",shape:"rectangle",restitution:0,mass:9e4,height:300,width:40,friction:0,frictionAir:0,frictionStatic:0,lockedProperties:{position:{x:i}}});t.emit("player::created",e)}),this.createBorder(),this.createBall()}},{key:"update",value:function(){}},{key:"createBall",value:function(){this.game.createEntity({id:"game-ball",type:"BALL",x:0,y:500,height:50,width:50,velocity:{x:8,y:8},maxSpeed:20,restitution:2.5,friction:0,frictionAir:0,frictionStatic:0})}},{key:"createBorder",value:function(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},i=200,n={top:{position:{x:0,y:-600},size:{width:2400,height:i}},bottom:{position:{x:0,y:600},size:{width:2400,height:i}},left:{position:{x:-1100,y:0},size:{width:i,height:1e3}},right:{position:{x:1100,y:0},size:{width:i,height:1e3}}};for(e in n){var o=n[e];void 0===t.id&&(t.id="border"),this.game.createEntity({name:t.id+"-"+e,type:"BORDER",shape:"rectangle",isStatic:!0,position:{x:o.position.x,y:o.position.y},width:o.size.width,height:o.size.height,depth:80})}}}])&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();a=s,l="world-pong",(u=r(u="id"))in a?Object.defineProperty(a,u,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[u]=l,i.default=s},{}],2:[function(e,t,i){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,r(n.key),n)}}function r(e){e=function(e,t){if("object"!=n(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0===i)return("string"===t?String:Number)(e);i=i.call(e,t||"default");if("object"!=n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==n(e)?e:String(e)}Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var a,u,l,s=function(){function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.game=e,this.id=t.id}var e,i,n;return e=t,(i=[{key:"init",value:function(e){this.game=e,this.createWorld()}},{key:"createWorld",value:function(){var e=this.game;e.use("Bullet"),e.use("Health"),e.use("Block"),e.use("StarField"),e.use("CurrentFPS"),e.use("Editor",{sourceCode:"https://github.com/yantra-core/mantra/blob/master/mantra-client/public/examples/offline/xstate-matter-babylon.html"}),e.use("XState",{world:{id:"bossFightGame",world:{width:800,height:600},entities:{boss:{type:"NPC",position:{x:-200,y:-600},height:600,width:600,health:1e3}},stateMachine:{id:"bossFightGame",initial:"Idle",context:{name:"boss",health:1e3},states:{Idle:{on:{START:"Active"}},Active:{on:{"entity::damage":{target:"UpdateEntity",cond:"isBossDamaged"},ENTITY_DESTROYED:{target:"Victory",cond:"isBossDefeated"}}},UpdateEntity:{on:{COMPLETE_UPDATE:"Active"},entry:"calculateComponentUpdate"},Victory:{type:"final"}},on:{}},guards:{isBossDamaged:function(e,t){return t.name===e.name&&"entity::damage"===t.type},isBossDefeated:function(e,t){return t.name===e.name&&"ENTITY_DESTROYED"===t.type}},actions:{calculateComponentUpdate:function(e,t){e.health-=t.damage;var t=255,i=255,n=0,o=255,r=0,a=0,u=Math.max(e.health,0)/1e3,r=i+(r-i)*(1-u),i=n+(a-n)*(1-u);e.color=Math.round(t+(o-t)*(1-u))<<16|Math.round(r)<<8|Math.round(i)}}}}),e.use("StarField"),e.on("plugin::ready::XState",function(){e.systems.xstate.loadEntities(),e.createDefaultPlayer()})}},{key:"update",value:function(){}},{key:"render",value:function(){}},{key:"destroy",value:function(){}}])&&o(e.prototype,i),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();a=s,l="XState",(u=r(u="id"))in a?Object.defineProperty(a,u,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[u]=l,i.default=s},{}],3:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),Object.defineProperty(i,"worlds",{enumerable:!0,get:function(){return n.default}});var n=(i=e("./index.js"))&&i.__esModule?i:{default:i}},{"./index.js":4}],4:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=o(e("./Pong/Pong.js")),e=o(e("./XState/XState.js"));function o(e){return e&&e.__esModule?e:{default:e}}var r={};r.Pong=n.default,r.XState=e.default,i.default=r},{"./Pong/Pong.js":1,"./XState/XState.js":2}]},{},[3])(3)});
//# sourceMappingURL=worlds.mantra.min.js.map