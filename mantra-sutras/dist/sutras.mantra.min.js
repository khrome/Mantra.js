!function(t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).SUTRAS=t()}(function(){return function n(o,r,d){function a(e,t){if(!r[e]){if(!o[e]){var i="function"==typeof require&&require;if(!t&&i)return i(e,!0);if(u)return u(e,!0);throw(t=new Error("Cannot find module '"+e+"'")).code="MODULE_NOT_FOUND",t}i=r[e]={exports:{}},o[e][0].call(i.exports,function(t){return a(o[e][1][t]||t)},i,i.exports,n,o,r,d)}return r[e].exports}for(var u="function"==typeof require&&require,t=0;t<d.length;t++)a(d[t]);return a}({1:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(t){var r=t.createEntity({type:"BLACK_HOLE",texture:"blackHoleTexture",radius:20,position:{x:t.worldCenter.x,y:t.worldCenter.y},mass:1e3}),t=t.createSutra();return t.onEveryTick(function(t){t.ents.forEach(function(t){var e,i,n,o;"BLACK_HOLE"!==t.type&&(e=r,t=t,i=.05,n=Vector.sub(t.position,e.position),(o=Vector.magnitude(n))<.5||(n=Vector.normalize(n),i=i*e.mass*t.mass/(o*o),i=Math.min(i,1),Matter.Body.applyForce(t,t.position,Vector.mult(n,-i))))})}),t}},{}],2:[function(t,e,i){"use strict";t=t("./index.js");console.log("SUTRAS",t),e.exports=t.default},{"./index.js":7}],3:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(t){t.createEntity({type:"DEMON",texture:"demon",width:8,height:8,depth:64,position:{x:-60,y:-60,z:32}}),t.createEntity({type:"DEMON",texture:"demon",width:8,height:8,depth:64,position:{x:64,y:-60,z:32}});t=t.createSutra();return t.addCondition("entityTouchedDemon",function(t,e){if(console.log("entityTouchedDemon check",t),"COLLISION"===t.type&&"START"===t.kind&&void 0!==t.DEMON)return!0}),t}},{}],4:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(i){i.createEntity({type:"FIRE",texture:{sheet:"loz_spritesheet",sprite:"fire"},width:16,height:16,depth:64,isStatic:!0,position:{x:-80,y:-60,z:32}}),i.createEntity({type:"FIRE",texture:{sheet:"loz_spritesheet",sprite:"fire"},width:16,height:16,depth:64,isStatic:!0,position:{x:80,y:-60,z:32}});var t=i.createSutra();return t.addCondition("entityTouchedFire",function(t,e){if("COLLISION"===t.type&&"START"===t.kind)return"FIRE"===t.bodyA.type||"FIRE"===t.bodyB.type||void 0}),t.if("entityTouchedFire").then("playNote",{note:"F#4"}).then("damageEntity"),t.on("damageEntity",function(t){var t="FIRE"===t.bodyA.type?t.bodyB:t.bodyA,e=t.texture;i.removeEntity(t.id),"PLAYER"===t.type&&(i.currentPlayerId=null,i.createDefaultPlayer({texture:e}))}),i.on("pointerDown",function(t,e){"FIRE"===t.type&&i.playNote("G4")}),t}},{}],5:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(n){for(var t=0;t<150;t+=5)for(var e=0;e<150;e+=5)n.createEntity({type:"LIFE_CELL",health:2,position:{x:t,y:e},body:!1,width:5,height:5});!function(t,e,i,n){n.createEntity({type:"LIFE_CELL",width:i,height:i,body:!1,health:1,position:{x:t,y:e}}),n.createEntity({type:"LIFE_CELL",width:i,height:i,body:!1,health:1,position:{x:t+i,y:e}}),n.createEntity({type:"LIFE_CELL",width:i,height:i,body:!1,health:1,position:{x:t+2*i,y:e}}),n.createEntity({type:"LIFE_CELL",width:i,height:i,body:!1,health:1,position:{x:t+2*i,y:e-i}}),n.createEntity({type:"LIFE_CELL",width:i,height:i,body:!1,health:1,position:{x:t+i,y:e-2*i}})}(100,100,5,n);var i=n.createSutra();return i.if("updateCellState").then("transitionCellState"),i.addCondition("updateCellState",function(t,e){return"LIFE_CELL"===t.type&&e.tick%10==0}),i.on("transitionCellState",function(t,e,i){r=t,d=[],a=[{x:-5,y:-5},{x:0,y:-5},{x:5,y:-5},{x:-5,y:0},{x:5,y:0},{x:-5,y:5},{x:0,y:5},{x:5,y:5}],i.ents.LIFE_CELL.forEach(function(t){for(var e=0,i=a;e<i.length;e++){var n=i[e],o=(r.position.x+n.x+150)%150,n=(r.position.y+n.y+150)%150;if(t.position.x===o&&t.position.y===n){d.push(t);break}}});var r,d,a,i=d.filter(function(t){return 1===t.health}).length;1===t.health&&(i<2||3<i)?t.health=0:2===t.health&&3===i&&(t.health=1),n.updateEntity({id:t.id,health:t.health,style:{backgroundColor:1===t.health?"green":"black"}})}),i}},{}],6:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(u){for(var t=0;t<22;t++){var e=t/22*2*Math.PI,i=80*Math.cos(e),e=80*Math.sin(e);u.createEntity({type:"HEXAPOD",texture:"demon",width:8,height:8,position:{x:i,y:e}})}var n=u.createSutra();return n.if("bulletHitHexapod").then("hexapodGrow"),n.addCondition("bulletHitHexapod",function(t,e){return"COLLISION"===t.type&&"START"===t.kind&&t.HEXAPOD&&t.BULLET}),n.on("hexapodGrow",function(t){t=t.HEXAPOD;u.updateEntity({id:t.id,width:1.1*t.width,height:1.1*t.height})}),n.if("hexapodTick").then("hexapodThink"),n.addCondition("hexapodTick",function(t,e){return"HEXAPOD"===t.type&&e.tick%1==0}),n.on("hexapodThink",function(t,e,i){var n=t,t=i.ents.HEXAPOD,o={x:0,y:0},r={x:0,y:0},d={x:0,y:0},a={x:0,y:0},i=(void 0!==i.currentPlayer&&i.currentPlayer&&(i=i.currentPlayer.position,i=y.sub(i,n.position),a=y.mult(y.normalize(i),.4)),t.forEach(function(t){var e;t.id!==n.id&&((e=y.magnitude(y.sub(n.position,t.position)))<1500&&(o=y.add(o,t.velocity)),e<1500&&(r=y.add(r,t.position)),e<n.width+t.width)&&(t=y.sub(n.position,t.position),d=y.add(d,y.div(t,e*e)))}),1<t.length&&(o=y.div(o,t.length-1),r=y.div(r,t.length-1),r=y.sub(r,n.position),d=y.div(d,t.length-1)),o=y.mult(y.normalize(o),.1),r=y.mult(y.normalize(r),.4),d=y.mult(y.normalize(d),.81),y.add(y.add(y.add(o,r),d),a)),t=y.add(n.position,y.mult(i,1));t.z=1,u.updateEntity({id:n.id,position:t})}),n};var y={add:function(t,e){return{x:t.x+e.x,y:t.y+e.y}},sub:function(t,e){return{x:t.x-e.x,y:t.y-e.y}},mult:function(t,e){return{x:t.x*e,y:t.y*e}},div:function(t,e){return{x:t.x/e,y:t.y/e}},magnitude:function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},normalize:function(t){var e=y.magnitude(t);return 0<e?y.div(t,e):{x:0,y:0}}}},{}],7:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=u(t("./demon.js")),o=u(t("./game-of-life.js")),r=u(t("./note.js")),d=u(t("./fire.js")),a=u(t("./blackhole.js")),t=u(t("./hexapod.js"));function u(t){return t&&t.__esModule?t:{default:t}}var y={};y.demon=n.default,y.blackhole=a.default,y.fire=d.default,y.gameOfLife=o.default,y.note=r.default,y.hexapod=t.default,i.default=y},{"./blackhole.js":1,"./demon.js":3,"./fire.js":4,"./game-of-life.js":5,"./hexapod.js":6,"./note.js":8}],8:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(e){e.createEntity({type:"NOTE",color:13434624,width:32,height:32,depth:16,isStatic:!0,position:{x:0,y:0,z:1}}),e.createSutra().addCondition("entityTouchedNote",function(t,e){if("COLLISION"===t.type&&"START"===t.kind)return"NOTE"===t.bodyA.type||"NOTE"===t.bodyB.type||void 0}),e.on("pointerDown",function(t){"NOTE"===t.type&&e.playNote(t.kind),"DRUM"===t.type&&e.playDrum(t.kind)})}},{}]},{},[2])(2)});
//# sourceMappingURL=sutras.mantra.min.js.map