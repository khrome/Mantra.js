{"version":3,"sourceRoot":"../","sources":["./dist/sutras.mantra.js"],"sourcesContent":["(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.SUTRAS = f()}})(function(){var define,module,exports;return (function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = blackHoleSutra;\n// blackhole.js - Marak Squires 2023\nfunction blackHoleSutra(game, context) {\n  var rules = game.createSutra();\n\n  // Remark: Note namspace of sutraname::methodname\n  //         Mantra runs a single Sutra tree which all entities are bound to\n  //         This requires a unique namespace for each Sutra\n  rules.on('blackhole::create', function () {\n    var entityData = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {\n      position: {\n        x: 0,\n        y: 0\n      }\n    };\n    // Create the Black Hole entity\n    var blackHole = game.createEntity({\n      type: 'BLACK_HOLE',\n      texture: 'fire',\n      isStatic: true,\n      isSensor: true,\n      radius: 20,\n      position: {\n        x: entityData.position.x,\n        y: entityData.position.y\n      },\n      mass: 100\n    });\n  });\n\n  // Define the gravitational constant\n  var GRAVITATIONAL_CONSTANT = 0.01; // Adjust as needed for gameplay\n\n  rules.addCondition('gravityTick', function (entity, gameState) {\n    return gameState.tick % 5 === 0;\n  });\n  rules[\"if\"]('gravityTick').then('applyGravity');\n  rules.on('applyGravity', function (entityData, node, gameState) {\n    // check if this running locally on a context or globally on all BLACK_HOLE entities\n    if (typeof context !== 'undefined') {\n      Object.keys(gameState.ents._).forEach(function (eId) {\n        var entity = gameState.ents._[eId];\n        if (entity.type !== 'BLACK_HOLE') {\n          applyGravity(context, entity, GRAVITATIONAL_CONSTANT);\n        }\n      });\n      return;\n    }\n    if (gameState.ents.BLACK_HOLE) {\n      gameState.ents.BLACK_HOLE.forEach(function (blackHole) {\n        Object.keys(gameState.ents._).forEach(function (eId) {\n          var entity = gameState.ents._[eId];\n          if (entity.type !== 'BLACK_HOLE') {\n            applyGravity(blackHole, entity, GRAVITATIONAL_CONSTANT);\n          }\n        });\n      });\n    }\n  });\n  rules[\"if\"]('entTouchedBlackhole').then('blackHoleCollision');\n  rules.addCondition('entTouchedBlackhole', function (entity, gameState) {\n    // check if this running locally on a context or globally on all BLACK_HOLE entities\n    if (typeof context !== 'undefined') {\n      return entity.type === 'COLLISION' && entity.kind === 'START' && entity[context.type];\n    } else {\n      return entity.type === 'COLLISION' && entity.kind === 'START' && entity.BLACK_HOLE;\n    }\n  });\n  rules.on('blackHoleCollision', function (collision) {\n    var pendingDestroy = collision.bodyA;\n    if (collision.bodyA.type === 'BLACK_HOLE') {\n      pendingDestroy = collision.bodyB;\n    }\n    if (typeof context !== 'undefined') {\n      if (collision.bodyA.type === context.type) {\n        pendingDestroy = collision.bodyB;\n      } else {\n        pendingDestroy = collision.bodyA;\n      }\n    }\n    game.removeEntity(pendingDestroy.id);\n  });\n\n  // Function to apply gravitational force\n  function applyGravity(body1, body2, gravity) {\n    var distance = Vector.sub(body2.position, body1.position);\n    var magnitude = Vector.magnitude(distance);\n    if (magnitude < 0.5) {\n      // This prevents extreme forces at very close distances\n      return;\n    }\n    distance = Vector.normalize(distance);\n    var force = gravity * body1.mass * body2.mass / (magnitude * magnitude);\n    var maxForce = 1; // Prevents excessively large forces\n    force = Math.min(force, maxForce);\n\n    // Apply the force towards the black hole\n    // TODO: add config flag for repulsion in addition to attraction\n    game.applyForce(body2.id, {\n      x: -distance.x * force,\n      y: -distance.y * force\n    });\n  }\n  return rules;\n}\n\n// Basic vector operations\nvar Vector = {\n  add: function add(v1, v2) {\n    return {\n      x: v1.x + v2.x,\n      y: v1.y + v2.y\n    };\n  },\n  sub: function sub(v1, v2) {\n    return {\n      x: v1.x - v2.x,\n      y: v1.y - v2.y\n    };\n  },\n  mult: function mult(v, factor) {\n    return {\n      x: v.x * factor,\n      y: v.y * factor\n    };\n  },\n  div: function div(v, factor) {\n    return {\n      x: v.x / factor,\n      y: v.y / factor\n    };\n  },\n  magnitude: function magnitude(v) {\n    return Math.sqrt(v.x * v.x + v.y * v.y);\n  },\n  normalize: function normalize(v) {\n    var mag = Vector.magnitude(v);\n    return mag > 0 ? Vector.div(v, mag) : {\n      x: 0,\n      y: 0\n    };\n  }\n};\n\n},{}],2:[function(require,module,exports){\n\"use strict\";\n\nvar SUTRAS = require('./index.js');\nconsole.log('SUTRAS', SUTRAS);\nmodule.exports = SUTRAS[\"default\"];\n\n},{\"./index.js\":8}],3:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = demon;\nfunction demon(game) {\n  game.createEntity({\n    type: 'DEMON',\n    texture: 'demon',\n    //texture: 'fire',\n    //color: 0xff0000,\n    width: 8,\n    height: 8,\n    depth: 64,\n    position: {\n      x: -60,\n      y: -60,\n      z: 32\n    }\n  });\n  game.createEntity({\n    type: 'DEMON',\n    texture: 'demon',\n    //texture: 'fire',\n    //color: 0xff0000,\n    width: 8,\n    height: 8,\n    depth: 64,\n    position: {\n      x: 64,\n      y: -60,\n      z: 32\n    }\n  });\n  var rules = game.createSutra();\n  rules.addCondition('entityTouchedDemon', function (entity, gameState) {\n    console.log('entityTouchedDemon check', entity);\n    if (entity.type === 'COLLISION' && entity.kind === 'START') {\n      if (typeof entity.DEMON !== 'undefined') {\n        return true;\n      }\n    }\n  });\n\n  /*\n  rules.on('entityTouchedDemon', function (collision) {\n    //let demonEntity = collision.bodyA.type === 'DEMON' ? collision.bodyA : collision.bodyB;\n    // Define the scale factor for how much bigger the demon should get\n    const scaleFactor = 2.1; // For example, 10% bigger\n    // Increase the size of the demon\n    game.updateEntity({\n      id: demonEntity.id,\n      width: demonEntity.width * scaleFactor,\n      height: demonEntity.height * scaleFactor,\n      depth: demonEntity.depth * scaleFactor\n    });\n  });\n  */\n\n  return rules;\n}\n\n},{}],4:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = fire;\nfunction fire(game) {\n  game.createEntity({\n    type: 'FIRE',\n    texture: {\n      sheet: 'loz_spritesheet',\n      sprite: 'fire'\n      // frame: 0 // TODO: support single frame / bypass animation of array\n    },\n    //texture: 'fire',\n    //color: 0xff0000,\n    width: 16,\n    height: 16,\n    depth: 64,\n    isStatic: true,\n    position: {\n      x: -80,\n      y: -60,\n      z: 32\n    }\n  });\n  game.createEntity({\n    type: 'FIRE',\n    texture: {\n      sheet: 'loz_spritesheet',\n      sprite: 'fire'\n      // frame: 0 // TODO: support single frame / bypass animation of array\n    },\n    //texture: 'fire',\n    //color: 0xff0000,\n    width: 16,\n    height: 16,\n    depth: 64,\n    isStatic: true,\n    position: {\n      x: 80,\n      y: -60,\n      z: 32\n    }\n  });\n  var rules = game.createSutra();\n  rules.addCondition('entityTouchedFire', function (entity, gameState) {\n    if (entity.type === 'COLLISION' && entity.kind === 'START') {\n      if (entity.bodyA.type === 'FIRE') {\n        return true;\n      }\n      if (entity.bodyB.type === 'FIRE') {\n        return true;\n      }\n    }\n  });\n  rules[\"if\"]('entityTouchedFire').then('playNote', {\n    note: 'F#4'\n  }).then('damageEntity');\n  rules.on('damageEntity', function (collision) {\n    var ent;\n    if (collision.bodyA.type === 'FIRE') {\n      ent = collision.bodyB;\n    } else {\n      ent = collision.bodyA;\n    }\n    // create a copy of the entity previous texture\n    // TODO: remove the createDefaultPlayer() call here\n    //       and instead have a game.on('player::death') event\n    //       listening in parent Sutra\n    var texture = ent.texture;\n    game.removeEntity(ent.id);\n    if (ent.type === 'PLAYER') {\n      game.currentPlayerId = null;\n      game.createDefaultPlayer({\n        texture: texture\n      });\n    }\n  });\n\n  // TODO: move pointerDown event into Sutra\n  game.on('pointerDown', function (entity, ev) {\n    if (entity.type === 'FIRE') {\n      game.playNote('G4');\n    }\n  });\n  return rules;\n}\n\n},{}],5:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = fountSutra;\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : String(i); }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n// fount.js - Custom Sutra for Generating Units\nfunction fountSutra(game) {\n  var config = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var rules = game.createSutra();\n\n  // Default configuration for the Fount\n  var settings = _objectSpread({\n    unitType: 'DEFAULT_UNIT',\n    // Type of unit to generate\n    texture: 'defaultTexture',\n    // Texture for the unit\n    unitSize: {\n      width: 10,\n      height: 10\n    },\n    // Size of the unit\n    sprayAngle: Math.PI / 4,\n    // Angle of the spray arc (in radians)\n    forceMagnitude: 0.5\n  }, config);\n\n  // Function to create a unit\n  function createUnit(position) {\n    return game.createEntity({\n      type: settings.unitType,\n      texture: settings.texture,\n      height: settings.unitSize.height,\n      width: settings.unitSize.width,\n      position: position\n    });\n  }\n\n  // Function to apply force to a unit in a given direction\n  function applySprayForce(unit) {\n    var angle = (Math.random() - 0.5) * settings.sprayAngle;\n    var force = {\n      x: settings.forceMagnitude * Math.cos(angle),\n      y: settings.forceMagnitude * Math.sin(angle)\n    };\n    game.applyForce(unit.id, force);\n  }\n\n  // Rule for generating and spraying units\n\n  rules[\"if\"]('fountTick').then('fountSpray');\n  rules.addCondition('fountTick', function (entity, gameState) {\n    return gameState.tick % 60 === 0;\n  });\n  rules.on('fountSpray', function (gameState, context) {\n    // Determine the position of the fount (can be context-dependent)\n    var fountPosition = typeof context !== 'undefined' ? context.position : {\n      x: 0,\n      y: 0\n    };\n\n    // Create a unit and apply force\n    var unit = createUnit(fountPosition);\n    applySprayForce(unit);\n  });\n  return rules;\n}\n\n// Basic vector operations (can be reused or imported from existing code)\n\n},{}],6:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = gameOfLife;\nfunction gameOfLife(game) {\n  var GRID_SIZE = 150; // Define the size of the grid\n  var CELL_SIZE = 5; // Size of each cell\n\n  // Initialize grid cells\n  for (var x = 0; x < GRID_SIZE; x += CELL_SIZE) {\n    for (var y = 0; y < GRID_SIZE; y += CELL_SIZE) {\n      game.createEntity({\n        type: 'LIFE_CELL',\n        //health: Math.random() < 0.5 ? 1 : 2, // 1 is alive, 2 is dead\n        health: 2,\n        position: {\n          x: x,\n          y: y\n        },\n        body: false,\n        width: CELL_SIZE,\n        height: CELL_SIZE\n      });\n    }\n  }\n  function initializeGlider(x, y, cellSize, game) {\n    game.createEntity({\n      type: 'LIFE_CELL',\n      width: cellSize,\n      height: cellSize,\n      body: false,\n      health: 1,\n      position: {\n        x: x,\n        y: y\n      }\n    });\n    game.createEntity({\n      type: 'LIFE_CELL',\n      width: cellSize,\n      height: cellSize,\n      body: false,\n      health: 1,\n      position: {\n        x: x + cellSize,\n        y: y\n      }\n    });\n    game.createEntity({\n      type: 'LIFE_CELL',\n      width: cellSize,\n      height: cellSize,\n      body: false,\n      health: 1,\n      position: {\n        x: x + 2 * cellSize,\n        y: y\n      }\n    });\n    game.createEntity({\n      type: 'LIFE_CELL',\n      width: cellSize,\n      height: cellSize,\n      body: false,\n      health: 1,\n      position: {\n        x: x + 2 * cellSize,\n        y: y - cellSize\n      }\n    });\n    game.createEntity({\n      type: 'LIFE_CELL',\n      width: cellSize,\n      height: cellSize,\n      body: false,\n      health: 1,\n      position: {\n        x: x + cellSize,\n        y: y - 2 * cellSize\n      }\n    });\n  }\n  initializeGlider(100, 100, CELL_SIZE, game);\n  var rules = game.createSutra();\n\n  // Rule for updating cell state\n  rules[\"if\"]('updateCellState').then('transitionCellState');\n  rules.addCondition('updateCellState', function (entity, gameState) {\n    return entity.type === 'LIFE_CELL' && gameState.tick % 10 === 0; // Update every 2 ticks\n  });\n  rules.on('transitionCellState', function (entity, node, gameState) {\n    var neighbors = getNeighbors(entity, node, gameState); // Function to get neighboring cells\n    var aliveNeighbors = neighbors.filter(function (neighbor) {\n      return neighbor.health === 1;\n    }).length;\n\n    // console.log(neighbors, aliveNeighbors)\n    // Game of Life rules\n    if (entity.health === 1 && (aliveNeighbors < 2 || aliveNeighbors > 3)) {\n      //entity.state = 'dead';\n      entity.health = 0;\n    } else if (entity.health === 2 && aliveNeighbors === 3) {\n      entity.health = 1;\n      //entity.state = 'alive';\n    }\n\n    // Update entity in the game\n    game.updateEntity({\n      id: entity.id,\n      health: entity.health,\n      style: {\n        backgroundColor: entity.health === 1 ? 'green' : 'black'\n      }\n    });\n  });\n  return rules;\n}\nfunction getNeighbors(cell, node, gameState) {\n  var gridSize = 150; // Define the size of the grid\n  var cellSize = 5; // Assuming each cell has a fixed size\n\n  var neighbors = [];\n  var neighborOffsets = [{\n    x: -cellSize,\n    y: -cellSize\n  }, {\n    x: 0,\n    y: -cellSize\n  }, {\n    x: cellSize,\n    y: -cellSize\n  }, {\n    x: -cellSize,\n    y: 0\n  }, /* Current Cell */{\n    x: cellSize,\n    y: 0\n  }, {\n    x: -cellSize,\n    y: cellSize\n  }, {\n    x: 0,\n    y: cellSize\n  }, {\n    x: cellSize,\n    y: cellSize\n  }];\n  gameState.ents.LIFE_CELL.forEach(function (otherCell) {\n    for (var _i = 0, _neighborOffsets = neighborOffsets; _i < _neighborOffsets.length; _i++) {\n      var offset = _neighborOffsets[_i];\n      var wrappedX = (cell.position.x + offset.x + gridSize) % gridSize;\n      var wrappedY = (cell.position.y + offset.y + gridSize) % gridSize;\n      if (otherCell.position.x === wrappedX && otherCell.position.y === wrappedY) {\n        neighbors.push(otherCell);\n        break; // Found neighbor, no need to check other offsets\n      }\n    }\n  });\n  return neighbors;\n}\n\n},{}],7:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = hexapod;\n// hexapod.js - Marak Squires 2023\nfunction hexapod(game) {\n  // create 22 hexapods\n  // start at 0,0 and make them in a circle with radius 80\n  var numberOfHexapods = 22;\n  var radius = 80;\n  for (var i = 0; i < numberOfHexapods; i++) {\n    // Calculate the angle for each hexapod\n    var angle = i / numberOfHexapods * 2 * Math.PI;\n\n    // Convert polar coordinates (angle, radius) to Cartesian coordinates (x, y)\n    var x = radius * Math.cos(angle);\n    var y = radius * Math.sin(angle);\n    game.createEntity({\n      type: 'HEXAPOD',\n      texture: 'demon',\n      width: 8,\n      height: 8,\n      position: {\n        x: x,\n        y: y\n      }\n    });\n  }\n  var rules = game.createSutra();\n\n  // Define constant values for different forces and parameters\n  var ALIGNMENT_FORCE = 0.1;\n  var COHESION_FORCE = 0.4;\n  var SEPARATION_FORCE = 0.81;\n  var PERCEPTION_RADIUS = 1500;\n  var FIELD_OF_VIEW = 1500;\n\n  // hexapods grow on bullet hit\n  rules[\"if\"]('bulletHitHexapod').then('hexapodGrow');\n  rules.addCondition('bulletHitHexapod', function (entity, gameState) {\n    return entity.type === 'COLLISION' && entity.kind === 'START' && entity.HEXAPOD && entity.BULLET;\n  });\n  rules.on('hexapodGrow', function (collision) {\n    var hexapod = collision.HEXAPOD;\n    // update entity size by 11%\n    game.updateEntity({\n      id: hexapod.id,\n      width: hexapod.width * 1.1,\n      height: hexapod.height * 1.1\n    });\n  });\n\n  // hexpods think each tick\n  rules[\"if\"]('hexapodTick').then('hexapodThink');\n  rules.addCondition('hexapodTick', function (entity, gameState) {\n    return entity.type === 'HEXAPOD' && gameState.tick % 1 === 0;\n  });\n  rules.on('hexapodThink', function (entity, node, gameState) {\n    var hexapod = entity;\n    var hexapods = gameState.ents.HEXAPOD;\n    var alignment = {\n      x: 0,\n      y: 0\n    };\n    var cohesion = {\n      x: 0,\n      y: 0\n    };\n    var separation = {\n      x: 0,\n      y: 0\n    };\n    var planetAvoidance = {\n      x: 0,\n      y: 0\n    };\n\n    // Target movement implementation\n    var targetForce = {\n      x: 0,\n      y: 0\n    };\n    if (typeof gameState.currentPlayer !== 'undefined') {\n      if (gameState.currentPlayer) {\n        var target = gameState.currentPlayer.position;\n        var targetDirection = Vector.sub(target, hexapod.position);\n        targetForce = Vector.mult(Vector.normalize(targetDirection), COHESION_FORCE);\n      }\n    }\n\n    // Process each hexapod in the field of view\n    hexapods.forEach(function (otherHexapod) {\n      if (otherHexapod.id !== hexapod.id) {\n        var d = Vector.magnitude(Vector.sub(hexapod.position, otherHexapod.position));\n\n        // Alignment\n        if (d < PERCEPTION_RADIUS) {\n          alignment = Vector.add(alignment, otherHexapod.velocity);\n        }\n\n        // Cohesion\n        if (d < PERCEPTION_RADIUS) {\n          cohesion = Vector.add(cohesion, otherHexapod.position);\n        }\n\n        // Separation\n        if (d < hexapod.width + otherHexapod.width) {\n          var diff = Vector.sub(hexapod.position, otherHexapod.position);\n          separation = Vector.add(separation, Vector.div(diff, d * d)); // Weight by distance\n        }\n      }\n    });\n\n    // Average out alignment, cohesion, and separation\n    if (hexapods.length > 1) {\n      alignment = Vector.div(alignment, hexapods.length - 1);\n      cohesion = Vector.div(cohesion, hexapods.length - 1);\n      cohesion = Vector.sub(cohesion, hexapod.position);\n      separation = Vector.div(separation, hexapods.length - 1);\n    }\n    alignment = Vector.mult(Vector.normalize(alignment), ALIGNMENT_FORCE);\n    cohesion = Vector.mult(Vector.normalize(cohesion), COHESION_FORCE);\n    separation = Vector.mult(Vector.normalize(separation), SEPARATION_FORCE);\n\n    // Apply forces\n    var force = Vector.add(Vector.add(Vector.add(alignment, cohesion), separation), targetForce);\n    // Update hexapod position\n    var newPosition = Vector.add(hexapod.position, Vector.mult(force, 1));\n    newPosition.z = 1; // for now\n    game.updateEntity({\n      id: hexapod.id,\n      position: newPosition\n    });\n  });\n  return rules;\n}\n\n// Basic vector operations\nvar Vector = {\n  add: function add(v1, v2) {\n    return {\n      x: v1.x + v2.x,\n      y: v1.y + v2.y\n    };\n  },\n  sub: function sub(v1, v2) {\n    return {\n      x: v1.x - v2.x,\n      y: v1.y - v2.y\n    };\n  },\n  mult: function mult(v, factor) {\n    return {\n      x: v.x * factor,\n      y: v.y * factor\n    };\n  },\n  div: function div(v, factor) {\n    return {\n      x: v.x / factor,\n      y: v.y / factor\n    };\n  },\n  magnitude: function magnitude(v) {\n    return Math.sqrt(v.x * v.x + v.y * v.y);\n  },\n  normalize: function normalize(v) {\n    var mag = Vector.magnitude(v);\n    return mag > 0 ? Vector.div(v, mag) : {\n      x: 0,\n      y: 0\n    };\n  }\n};\n\n},{}],8:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\nvar _demon = _interopRequireDefault(require(\"./demon.js\"));\nvar _fount = _interopRequireDefault(require(\"./fount.js\"));\nvar _gameOfLife = _interopRequireDefault(require(\"./game-of-life.js\"));\nvar _note = _interopRequireDefault(require(\"./note.js\"));\nvar _fire = _interopRequireDefault(require(\"./fire.js\"));\nvar _blackhole = _interopRequireDefault(require(\"./blackhole.js\"));\nvar _hexapod = _interopRequireDefault(require(\"./hexapod.js\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\nvar Sutras = {};\nSutras.demon = _demon[\"default\"];\nSutras.fount = _fount[\"default\"];\nSutras.blackhole = _blackhole[\"default\"];\nSutras.fire = _fire[\"default\"];\nSutras.gameOfLife = _gameOfLife[\"default\"];\nSutras.note = _note[\"default\"];\nSutras.hexapod = _hexapod[\"default\"];\nvar _default = exports[\"default\"] = Sutras;\n\n},{\"./blackhole.js\":1,\"./demon.js\":3,\"./fire.js\":4,\"./fount.js\":5,\"./game-of-life.js\":6,\"./hexapod.js\":7,\"./note.js\":9}],9:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = note;\nfunction note(game) {\n  // if touch note play sound\n  game.createEntity({\n    type: 'NOTE',\n    color: 0xccff00,\n    width: 32,\n    height: 32,\n    depth: 16,\n    isStatic: true,\n    position: {\n      x: 0,\n      y: 0,\n      z: 1\n    }\n  });\n  var rules = game.createSutra();\n  rules.addCondition('entityTouchedNote', function (entity, gameState) {\n    if (entity.type === 'COLLISION' && entity.kind === 'START') {\n      if (entity.bodyA.type === 'NOTE') {\n        return true;\n      }\n      if (entity.bodyB.type === 'NOTE') {\n        return true;\n      }\n    }\n  });\n\n  // TODO: move these events into a Sutra\n  game.on('pointerDown', function (entity) {\n    if (entity.type === 'NOTE') {\n      game.playNote(entity.kind);\n    }\n    if (entity.type === 'DRUM') {\n      game.playDrum(entity.kind);\n    }\n  });\n}\n\n},{}]},{},[2])(2)\n});\n"],"names":["f","exports","module","define","amd","window","global","self","this","SUTRAS","r","e","n","t","o","i","c","require","u","a","Error","code","p","call","length","1","Object","defineProperty","value","game","context","rules","createSutra","on","entityData","arguments","undefined","position","x","y","createEntity","type","texture","isStatic","isSensor","radius","mass","applyGravity","body1","body2","gravity","distance","Vector","sub","magnitude","normalize","force","Math","min","applyForce","id","addCondition","entity","gameState","tick","then","node","keys","ents","_","forEach","eId","BLACK_HOLE","blackHole","kind","collision","pendingDestroy","bodyA","bodyB","removeEntity","add","v1","v2","mult","v","factor","div","sqrt","mag","2","console","log","./index.js","3","width","height","depth","z","DEMON","4","sheet","sprite","note","ent","currentPlayerId","createDefaultPlayer","ev","playNote","5","_typeof","Symbol","iterator","constructor","prototype","ownKeys","getOwnPropertySymbols","filter","getOwnPropertyDescriptor","enumerable","push","apply","config","settings","obj","key","toPrimitive","String","Number","TypeError","configurable","writable","getOwnPropertyDescriptors","defineProperties","unitType","unitSize","sprayAngle","PI","forceMagnitude","angle","fountPosition","unit","random","cos","sin","6","health","body","initializeGlider","cellSize","cell","neighbors","neighborOffsets","LIFE_CELL","otherCell","_i","_neighborOffsets","offset","wrappedX","wrappedY","aliveNeighbors","neighbor","updateEntity","style","backgroundColor","7","HEXAPOD","BULLET","hexapod","hexapods","alignment","cohesion","separation","targetForce","currentPlayer","target","targetDirection","otherHexapod","d","velocity","diff","newPosition","8","_demon","_interopRequireDefault","_fount","_gameOfLife","_note","_fire","_blackhole","_hexapod","__esModule","default","Sutras","demon","fount","blackhole","fire","gameOfLife","./blackhole.js","./demon.js","./fire.js","./fount.js","./game-of-life.js","./hexapod.js","./note.js","9","color","playDrum"],"mappings":"AAAA,CAAA,SAAUA,GAAuB,UAAjB,OAAOC,SAAoC,aAAhB,OAAOC,OAAsBA,OAAOD,QAAQD,EAAE,EAA0B,YAAhB,OAAOG,QAAqBA,OAAOC,IAAKD,OAAO,GAAGH,CAAC,GAAgC,aAAhB,OAAOK,OAAwBA,OAA+B,aAAhB,OAAOC,OAAwBA,OAA6B,aAAd,OAAOC,KAAsBA,KAAYC,MAAOC,OAAST,EAAE,CAAG,EAAE,WAAqC,OAAmB,SAASU,EAAEC,EAAEC,EAAEC,GAAG,SAASC,EAAEC,EAAEf,GAAG,GAAG,CAACY,EAAEG,GAAG,CAAC,GAAG,CAACJ,EAAEI,GAAG,CAAC,IAAIC,EAAE,YAAY,OAAOC,SAASA,QAAQ,GAAG,CAACjB,GAAGgB,EAAE,OAAOA,EAAED,EAAE,CAAA,CAAE,EAAE,GAAGG,EAAE,OAAOA,EAAEH,EAAE,CAAA,CAAE,EAAgD,MAA1CI,EAAE,IAAIC,MAAM,uBAAuBL,EAAE,GAAG,GAAUM,KAAK,mBAAmBF,CAAC,CAAKG,EAAEV,EAAEG,GAAG,CAACd,QAAQ,EAAE,EAAEU,EAAEI,GAAG,GAAGQ,KAAKD,EAAErB,QAAQ,SAASS,GAAoB,OAAOI,EAAlBH,EAAEI,GAAG,GAAGL,IAAeA,CAAC,CAAC,EAAEY,EAAEA,EAAErB,QAAQS,EAAEC,EAAEC,EAAEC,CAAC,CAAC,CAAC,OAAOD,EAAEG,GAAGd,OAAO,CAAC,IAAI,IAAIiB,EAAE,YAAY,OAAOD,SAASA,QAAQF,EAAE,EAAEA,EAAEF,EAAEW,OAAOT,CAAC,GAAGD,EAAED,EAAEE,EAAE,EAAE,OAAOD,CAAC,EAAc,CAACW,EAAE,CAAC,SAASR,EAAQf,EAAOD,GACt1B,aAEAyB,OAAOC,eAAe1B,EAAS,aAAc,CAC3C2B,MAAO,CAAA,CACT,CAAC,EACD3B,EAAiB,QAEjB,SAAwB4B,EAAMC,GAC5B,IAAIC,EAAQF,EAAKG,YAAY,EAK7BD,EAAME,GAAG,oBAAqB,WAC5B,IAAIC,EAAgC,EAAnBC,UAAUX,QAA+BY,KAAAA,IAAjBD,UAAU,GAAmBA,UAAU,GAAK,CACnFE,SAAU,CACRC,EAAG,EACHC,EAAG,CACL,CACF,EAEgBV,EAAKW,aAAa,CAChCC,KAAM,aACNC,QAAS,OACTC,SAAU,CAAA,EACVC,SAAU,CAAA,EACVC,OAAQ,GACRR,SAAU,CACRC,EAAGJ,EAAWG,SAASC,EACvBC,EAAGL,EAAWG,SAASE,CACzB,EACAO,KAAM,GACR,CAAC,CACH,CAAC,EAwDD,SAASC,EAAaC,EAAOC,EAAOC,GAClC,IAAIC,EAAWC,EAAOC,IAAIJ,EAAMZ,SAAUW,EAAMX,QAAQ,EACpDiB,EAAYF,EAAOE,UAAUH,CAAQ,EACrCG,EAAY,KAIhBH,EAAWC,EAAOG,UAAUJ,CAAQ,EAChCK,EAAQN,EAAUF,EAAMF,KAAOG,EAAMH,MAAQQ,EAAYA,GAE7DE,EAAQC,KAAKC,IAAIF,EADF,CACiB,EAIhC3B,EAAK8B,WAAWV,EAAMW,GAAI,CACxBtB,EAAG,CAACa,EAASb,EAAIkB,EACjBjB,EAAG,CAACY,EAASZ,EAAIiB,CACnB,CAAC,EACH,CACA,OAtEAzB,EAAM8B,aAAa,cAAe,SAAUC,EAAQC,GAClD,OAAOA,EAAUC,KAAO,GAAM,CAChC,CAAC,EACDjC,EAAU,GAAE,aAAa,EAAEkC,KAAK,cAAc,EAC9ClC,EAAME,GAAG,eAAgB,SAAUC,EAAYgC,EAAMH,GAE5B,KAAA,IAAZjC,EACTJ,OAAOyC,KAAKJ,EAAUK,KAAKC,CAAC,EAAEC,QAAQ,SAAUC,GAC1CT,EAASC,EAAUK,KAAKC,EAAEE,GACV,eAAhBT,EAAOrB,MACTM,EAAajB,EAASgC,EAZD,GAY+B,CAExD,CAAC,EAGCC,EAAUK,KAAKI,YACjBT,EAAUK,KAAKI,WAAWF,QAAQ,SAAUG,GAC1C/C,OAAOyC,KAAKJ,EAAUK,KAAKC,CAAC,EAAEC,QAAQ,SAAUC,GAC1CT,EAASC,EAAUK,KAAKC,EAAEE,GACV,eAAhBT,EAAOrB,MACTM,EAAa0B,EAAWX,EAtBL,GAsBmC,CAE1D,CAAC,CACH,CAAC,CAEL,CAAC,EACD/B,EAAU,GAAE,qBAAqB,EAAEkC,KAAK,oBAAoB,EAC5DlC,EAAM8B,aAAa,sBAAuB,SAAUC,EAAQC,GAE1D,OAAuB,KAAA,IAAZjC,EACc,cAAhBgC,EAAOrB,MAAwC,UAAhBqB,EAAOY,MAAoBZ,EAAOhC,EAAQW,MAEzD,cAAhBqB,EAAOrB,MAAwC,UAAhBqB,EAAOY,MAAoBZ,EAAOU,UAE5E,CAAC,EACDzC,EAAME,GAAG,qBAAsB,SAAU0C,GACvC,IAAIC,EAAiBD,EAAUE,MACF,eAAzBF,EAAUE,MAAMpC,OAClBmC,EAAiBD,EAAUG,OAEN,KAAA,IAAZhD,IAEP8C,EADED,EAAUE,MAAMpC,OAASX,EAAQW,KAClBkC,EAAUG,MAEVH,EAAUE,OAG/BhD,EAAKkD,aAAaH,EAAehB,EAAE,CACrC,CAAC,EAsBM7B,CACT,EAGA,IAAIqB,EAAS,CACX4B,IAAK,SAAaC,EAAIC,GACpB,MAAO,CACL5C,EAAG2C,EAAG3C,EAAI4C,EAAG5C,EACbC,EAAG0C,EAAG1C,EAAI2C,EAAG3C,CACf,CACF,EACAc,IAAK,SAAa4B,EAAIC,GACpB,MAAO,CACL5C,EAAG2C,EAAG3C,EAAI4C,EAAG5C,EACbC,EAAG0C,EAAG1C,EAAI2C,EAAG3C,CACf,CACF,EACA4C,KAAM,SAAcC,EAAGC,GACrB,MAAO,CACL/C,EAAG8C,EAAE9C,EAAI+C,EACT9C,EAAG6C,EAAE7C,EAAI8C,CACX,CACF,EACAC,IAAK,SAAaF,EAAGC,GACnB,MAAO,CACL/C,EAAG8C,EAAE9C,EAAI+C,EACT9C,EAAG6C,EAAE7C,EAAI8C,CACX,CACF,EACA/B,UAAW,SAAmB8B,GAC5B,OAAO3B,KAAK8B,KAAKH,EAAE9C,EAAI8C,EAAE9C,EAAI8C,EAAE7C,EAAI6C,EAAE7C,CAAC,CACxC,EACAgB,UAAW,SAAmB6B,GAC5B,IAAII,EAAMpC,EAAOE,UAAU8B,CAAC,EAC5B,OAAa,EAANI,EAAUpC,EAAOkC,IAAIF,EAAGI,CAAG,EAAI,CACpClD,EAAG,EACHC,EAAG,CACL,CACF,CACF,CAEA,EAAE,IAAIkD,EAAE,CAAC,SAASxE,EAAQf,EAAOD,GACjC,aAEIQ,EAASQ,EAAQ,YAAY,EACjCyE,QAAQC,IAAI,SAAUlF,CAAM,EAC5BP,EAAOD,QAAUQ,EAAgB,OAEjC,EAAE,CAACmF,aAAa,CAAC,GAAGC,EAAE,CAAC,SAAS5E,EAAQf,EAAOD,GAC/C,aAEAyB,OAAOC,eAAe1B,EAAS,aAAc,CAC3C2B,MAAO,CAAA,CACT,CAAC,EACD3B,EAAiB,QACjB,SAAe4B,GACbA,EAAKW,aAAa,CAChBC,KAAM,QACNC,QAAS,QAGToD,MAAO,EACPC,OAAQ,EACRC,MAAO,GACP3D,SAAU,CACRC,EAAG,CAAC,GACJC,EAAG,CAAC,GACJ0D,EAAG,EACL,CACF,CAAC,EACDpE,EAAKW,aAAa,CAChBC,KAAM,QACNC,QAAS,QAGToD,MAAO,EACPC,OAAQ,EACRC,MAAO,GACP3D,SAAU,CACRC,EAAG,GACHC,EAAG,CAAC,GACJ0D,EAAG,EACL,CACF,CAAC,EACGlE,EAAQF,EAAKG,YAAY,EAyB7B,OAxBAD,EAAM8B,aAAa,qBAAsB,SAAUC,EAAQC,GAEzD,GADA2B,QAAQC,IAAI,2BAA4B7B,CAAM,EAC1B,cAAhBA,EAAOrB,MAAwC,UAAhBqB,EAAOY,MACZ,KAAA,IAAjBZ,EAAOoC,MAChB,MAAO,CAAA,CAGb,CAAC,EAiBMnE,CACT,CAEA,EAAE,IAAIoE,EAAE,CAAC,SAASlF,EAAQf,EAAOD,GACjC,aAEAyB,OAAOC,eAAe1B,EAAS,aAAc,CAC3C2B,MAAO,CAAA,CACT,CAAC,EACD3B,EAAiB,QACjB,SAAc4B,GACZA,EAAKW,aAAa,CAChBC,KAAM,OACNC,QAAS,CACP0D,MAAO,kBACPC,OAAQ,MAEV,EAGAP,MAAO,GACPC,OAAQ,GACRC,MAAO,GACPrD,SAAU,CAAA,EACVN,SAAU,CACRC,EAAG,CAAC,GACJC,EAAG,CAAC,GACJ0D,EAAG,EACL,CACF,CAAC,EACDpE,EAAKW,aAAa,CAChBC,KAAM,OACNC,QAAS,CACP0D,MAAO,kBACPC,OAAQ,MAEV,EAGAP,MAAO,GACPC,OAAQ,GACRC,MAAO,GACPrD,SAAU,CAAA,EACVN,SAAU,CACRC,EAAG,GACHC,EAAG,CAAC,GACJ0D,EAAG,EACL,CACF,CAAC,EACD,IAAIlE,EAAQF,EAAKG,YAAY,EAyC7B,OAxCAD,EAAM8B,aAAa,oBAAqB,SAAUC,EAAQC,GACxD,GAAoB,cAAhBD,EAAOrB,MAAwC,UAAhBqB,EAAOY,KACxC,MAA0B,SAAtBZ,EAAOe,MAAMpC,MAGS,SAAtBqB,EAAOgB,MAAMrC,MAAjB,KAAA,CAIJ,CAAC,EACDV,EAAU,GAAE,mBAAmB,EAAEkC,KAAK,WAAY,CAChDqC,KAAM,KACR,CAAC,EAAErC,KAAK,cAAc,EACtBlC,EAAME,GAAG,eAAgB,SAAU0C,GACjC,IAEE4B,EAD2B,SAAzB5B,EAAUE,MAAMpC,KACZkC,EAAUG,MAEVH,EAAUE,MAMdnC,EAAU6D,EAAI7D,QAClBb,EAAKkD,aAAawB,EAAI3C,EAAE,EACP,WAAb2C,EAAI9D,OACNZ,EAAK2E,gBAAkB,KACvB3E,EAAK4E,oBAAoB,CACvB/D,QAASA,CACX,CAAC,EAEL,CAAC,EAGDb,EAAKI,GAAG,cAAe,SAAU6B,EAAQ4C,GACnB,SAAhB5C,EAAOrB,MACTZ,EAAK8E,SAAS,IAAI,CAEtB,CAAC,EACM5E,CACT,CAEA,EAAE,IAAI6E,EAAE,CAAC,SAAS3F,EAAQf,EAAOD,GACjC,aAMA,SAAS4G,EAAQ/F,GAAgC,OAAO+F,EAAU,YAAc,OAAOC,QAAU,UAAY,OAAOA,OAAOC,SAAW,SAAUjG,GAAK,OAAO,OAAOA,CAAG,EAAI,SAAUA,GAAK,OAAOA,GAAK,YAAc,OAAOgG,QAAUhG,EAAEkG,cAAgBF,QAAUhG,IAAMgG,OAAOG,UAAY,SAAW,OAAOnG,CAAG,GAAWA,CAAC,CAAG,CAC7T,SAASoG,EAAQvG,EAAGD,GAAK,IAAgEI,EAA5DD,EAAIa,OAAOyC,KAAKxD,CAAC,EAAsM,OAA/Le,OAAOyF,wBAA6BrG,EAAIY,OAAOyF,sBAAsBxG,CAAC,EAAGD,IAAMI,EAAIA,EAAEsG,OAAO,SAAU1G,GAAK,OAAOgB,OAAO2F,yBAAyB1G,EAAGD,CAAC,EAAE4G,UAAY,CAAC,GAAIzG,EAAE0G,KAAKC,MAAM3G,EAAGC,CAAC,GAAYD,CAAG,CAL9Pa,OAAOC,eAAe1B,EAAS,aAAc,CAC3C2B,MAAO,CAAA,CACT,CAAC,EACD3B,EAAiB,QAQjB,SAAoB4B,GAClB,IAAI4F,EAA4B,EAAnBtF,UAAUX,QAA+BY,KAAAA,IAAjBD,UAAU,GAAmBA,UAAU,GAAK,GAC7EJ,EAAQF,EAAKG,YAAY,EAGzB0F,EAVN,SAAuB/G,GAAK,IAAK,IAAID,EAAI,EAAGA,EAAIyB,UAAUX,OAAQd,CAAC,GAAI,CAAE,IAAIG,EAAI,MAAQsB,UAAUzB,GAAKyB,UAAUzB,GAAK,GAAIA,EAAI,EAAIwG,EAAQxF,OAAOb,CAAC,EAAG,CAAA,CAAE,EAAEyD,QAAQ,SAAU5D,GAC5K,IAAyBiH,EAAU/F,EAAV+F,EADwKhH,EAC9JiB,EADoKf,EACzK+G,EADsKlH,IACxJkH,EAC5C,SAAwB/G,GAASE,EACjC,SAAsBF,EAAGH,GAAK,GAAI,UAAYmG,EAAQhG,CAAC,GAAK,CAACA,EAAG,OAAOA,EAAG,IAAIF,EAAIE,EAAEiG,OAAOe,aAAc,GAAI,KAAA,IAAWlH,EAAqJ,OAAQ,WAAaD,EAAIoH,OAASC,QAAQlH,CAAC,EAAvLE,EAAIJ,EAAEY,KAAKV,EAAGH,GAAK,SAAS,EAAG,GAAI,UAAYmG,EAAQ9F,CAAC,EAAG,OAAOA,EAAG,MAAM,IAAIiH,UAAU,8CAA8C,CAAmD,EADzQnH,EAAG,QAAQ,EAAG,MAAO,UAAYgG,EAAQ9F,CAAC,EAAIA,EAAI+G,OAAO/G,CAAC,CAAG,EAD9C6G,CAAG,KAAcD,EAAOjG,OAAOC,eAAegG,EAAKC,EAAK,CAAEhG,MAAOA,EAAO0F,WAAY,CAAA,EAAMW,aAAc,CAAA,EAAMC,SAAU,CAAA,CAAK,CAAC,EAAYP,EAAIC,GAAOhG,CADR,CAAC,EAAIF,OAAOyG,0BAA4BzG,OAAO0G,iBAAiBzH,EAAGe,OAAOyG,0BAA0BtH,CAAC,CAAC,EAAIqG,EAAQxF,OAAOb,CAAC,CAAC,EAAEyD,QAAQ,SAAU5D,GAAKgB,OAAOC,eAAehB,EAAGD,EAAGgB,OAAO2F,yBAAyBxG,EAAGH,CAAC,CAAC,CAAG,CAAC,CAAG,CAAE,OAAOC,CAAG,EAUvZ,CAC3B0H,SAAU,eAEV3F,QAAS,iBAET4F,SAAU,CACRxC,MAAO,GACPC,OAAQ,EACV,EAEAwC,WAAY9E,KAAK+E,GAAK,EAEtBC,eAAgB,EAClB,EAAGhB,CAAM,EAwCT,OAfA1F,EAAU,GAAE,WAAW,EAAEkC,KAAK,YAAY,EAC1ClC,EAAM8B,aAAa,YAAa,SAAUC,EAAQC,GAChD,OAAOA,EAAUC,KAAO,IAAO,CACjC,CAAC,EACDjC,EAAME,GAAG,aAAc,SAAU8B,EAAWjC,GAE1C,IAhBI4G,EAgBAC,EAAmC,KAAA,IAAZ7G,EAA0BA,EAAQO,SAAW,CACtEC,EAAG,EACHC,EAAG,CACL,EAGIqG,EAjCG/G,EAAKW,aAAa,CACvBC,KAAMiF,EAASW,SACf3F,QAASgF,EAAShF,QAClBqD,OAAQ2B,EAASY,SAASvC,OAC1BD,MAAO4B,EAASY,SAASxC,MACzBzD,SA4BoBsG,CA3BtB,CAAC,EAIsBC,EAwBPA,EAvBZF,GAASjF,KAAKoF,OAAO,EAAI,IAAOnB,EAASa,WACzC/E,EAAQ,CACVlB,EAAGoF,EAASe,eAAiBhF,KAAKqF,IAAIJ,CAAK,EAC3CnG,EAAGmF,EAASe,eAAiBhF,KAAKsF,IAAIL,CAAK,CAC7C,EACA7G,EAAK8B,WAAWiF,EAAKhF,GAAIJ,CAAK,CAmBhC,CAAC,EACMzB,CACT,CAIA,EAAE,IAAIiH,EAAE,CAAC,SAAS/H,EAAQf,EAAOD,GACjC,aAEAyB,OAAOC,eAAe1B,EAAS,aAAc,CAC3C2B,MAAO,CAAA,CACT,CAAC,EACD3B,EAAiB,QACjB,SAAoB4B,GAKlB,IAJA,IAISS,EAAI,EAAGA,EAJA,IAIeA,GAHf,EAId,IAAK,IAAIC,EAAI,EAAGA,EALF,IAKiBA,GAJjB,EAKZV,EAAKW,aAAa,CAChBC,KAAM,YAENwG,OAAQ,EACR5G,SAAU,CACRC,EAAGA,EACHC,EAAGA,CACL,EACA2G,KAAM,CAAA,EACNpD,MAdU,EAeVC,OAfU,CAgBZ,CAAC,EA4DLoD,CAzDA,SAA0B7G,EAAGC,EAAG6G,EAAUvH,GACxCA,EAAKW,aAAa,CAChBC,KAAM,YACNqD,MAAOsD,EACPrD,OAAQqD,EACRF,KAAM,CAAA,EACND,OAAQ,EACR5G,SAAU,CACRC,EAAGA,EACHC,EAAGA,CACL,CACF,CAAC,EACDV,EAAKW,aAAa,CAChBC,KAAM,YACNqD,MAAOsD,EACPrD,OAAQqD,EACRF,KAAM,CAAA,EACND,OAAQ,EACR5G,SAAU,CACRC,EAAGA,EAAI8G,EACP7G,EAAGA,CACL,CACF,CAAC,EACDV,EAAKW,aAAa,CAChBC,KAAM,YACNqD,MAAOsD,EACPrD,OAAQqD,EACRF,KAAM,CAAA,EACND,OAAQ,EACR5G,SAAU,CACRC,EAAGA,EAAI,EAAI8G,EACX7G,EAAGA,CACL,CACF,CAAC,EACDV,EAAKW,aAAa,CAChBC,KAAM,YACNqD,MAAOsD,EACPrD,OAAQqD,EACRF,KAAM,CAAA,EACND,OAAQ,EACR5G,SAAU,CACRC,EAAGA,EAAI,EAAI8G,EACX7G,EAAGA,EAAI6G,CACT,CACF,CAAC,EACDvH,EAAKW,aAAa,CAChBC,KAAM,YACNqD,MAAOsD,EACPrD,OAAQqD,EACRF,KAAM,CAAA,EACND,OAAQ,EACR5G,SAAU,CACRC,EAAGA,EAAI8G,EACP7G,EAAGA,EAAI,EAAI6G,CACb,CACF,CAAC,CACH,EACiB,IAAK,IA5EN,EA4EsBvH,CAAI,EAC1C,IAAIE,EAAQF,EAAKG,YAAY,EAgC7B,OA7BAD,EAAU,GAAE,iBAAiB,EAAEkC,KAAK,qBAAqB,EACzDlC,EAAM8B,aAAa,kBAAmB,SAAUC,EAAQC,GACtD,MAAuB,cAAhBD,EAAOrB,MAAwBsB,EAAUC,KAAO,IAAO,CAChE,CAAC,EACDjC,EAAME,GAAG,sBAAuB,SAAU6B,EAAQI,EAAMH,GA2BpCsF,EA1BWvF,EA8B3BwF,EAAY,GACZC,EAAkB,CAAC,CACrBjH,EAAG,CAJU,EAKbC,EAAG,CALU,CAMf,EAAG,CACDD,EAAG,EACHC,EAAG,CARU,CASf,EAAG,CACDD,EAVa,EAWbC,EAAG,CAXU,CAYf,EAAG,CACDD,EAAG,CAbU,EAcbC,EAAG,CACL,EAAqB,CACnBD,EAhBa,EAiBbC,EAAG,CACL,EAAG,CACDD,EAAG,CAnBU,EAoBbC,EApBa,CAqBf,EAAG,CACDD,EAAG,EACHC,EAvBa,CAwBf,EAAG,CACDD,EAzBa,EA0BbC,EA1Ba,CA2Bf,GAvD6CwB,EAwDnCK,KAAKoF,UAAUlF,QAAQ,SAAUmF,GACzC,IAAK,IAAIC,EAAK,EAAGC,EAAmBJ,EAAiBG,EAAKC,EAAiBnI,OAAQkI,CAAE,GAAI,CACvF,IAAIE,EAASD,EAAiBD,GAC1BG,GAAYR,EAAKhH,SAASC,EAAIsH,EAAOtH,EAhC9B,KAAA,IAiCPwH,GAAYT,EAAKhH,SAASE,EAAIqH,EAAOrH,EAjC9B,KAAA,IAkCX,GAAIkH,EAAUpH,SAASC,IAAMuH,GAAYJ,EAAUpH,SAASE,IAAMuH,EAAU,CAC1ER,EAAU/B,KAAKkC,CAAS,EACxB,KACF,CACF,CACF,CAAC,EAlEC,IA0BkBJ,EAIhBC,EACAC,EA9BEQ,EAkECT,EAlE0BlC,OAAO,SAAU4C,GAC9C,OAA2B,IAApBA,EAASf,MAClB,CAAC,EAAEzH,OAImB,IAAlBsC,EAAOmF,SAAiBc,EAAiB,GAAsB,EAAjBA,GAEhDjG,EAAOmF,OAAS,EACW,IAAlBnF,EAAOmF,QAAmC,IAAnBc,IAChCjG,EAAOmF,OAAS,GAKlBpH,EAAKoI,aAAa,CAChBrG,GAAIE,EAAOF,GACXqF,OAAQnF,EAAOmF,OACfiB,MAAO,CACLC,gBAAmC,IAAlBrG,EAAOmF,OAAe,QAAU,OACnD,CACF,CAAC,CACH,CAAC,EACMlH,CACT,CA6CA,EAAE,IAAIqI,EAAE,CAAC,SAASnJ,EAAQf,EAAOD,GACjC,aAEAyB,OAAOC,eAAe1B,EAAS,aAAc,CAC3C2B,MAAO,CAAA,CACT,CAAC,EACD3B,EAAiB,QAEjB,SAAiB4B,GAKf,IAFA,IAESd,EAAI,EAAGA,EAFO,GAEeA,CAAC,GAAI,CAEzC,IAAI2H,EAAQ3H,EAJS,GAIc,EAAI0C,KAAK+E,GAGxClG,EANO,GAMMmB,KAAKqF,IAAIJ,CAAK,EAC3BnG,EAPO,GAOMkB,KAAKsF,IAAIL,CAAK,EAC/B7G,EAAKW,aAAa,CAChBC,KAAM,UACNC,QAAS,QACToD,MAAO,EACPC,OAAQ,EACR1D,SAAU,CACRC,EAAGA,EACHC,EAAGA,CACL,CACF,CAAC,CACH,CACA,IAAIR,EAAQF,EAAKG,YAAY,EA0G7B,OAhGAD,EAAU,GAAE,kBAAkB,EAAEkC,KAAK,aAAa,EAClDlC,EAAM8B,aAAa,mBAAoB,SAAUC,EAAQC,GACvD,MAAuB,cAAhBD,EAAOrB,MAAwC,UAAhBqB,EAAOY,MAAoBZ,EAAOuG,SAAWvG,EAAOwG,MAC5F,CAAC,EACDvI,EAAME,GAAG,cAAe,SAAU0C,GAC5B4F,EAAU5F,EAAU0F,QAExBxI,EAAKoI,aAAa,CAChBrG,GAAI2G,EAAQ3G,GACZkC,MAAuB,IAAhByE,EAAQzE,MACfC,OAAyB,IAAjBwE,EAAQxE,MAClB,CAAC,CACH,CAAC,EAGDhE,EAAU,GAAE,aAAa,EAAEkC,KAAK,cAAc,EAC9ClC,EAAM8B,aAAa,cAAe,SAAUC,EAAQC,GAClD,MAAuB,YAAhBD,EAAOrB,MAAsBsB,EAAUC,KAAO,GAAM,CAC7D,CAAC,EACDjC,EAAME,GAAG,eAAgB,SAAU6B,EAAQI,EAAMH,GAC/C,IAAIwG,EAAUzG,EACV0G,EAAWzG,EAAUK,KAAKiG,QAC1BI,EAAY,CACdnI,EAAG,EACHC,EAAG,CACL,EACImI,EAAW,CACbpI,EAAG,EACHC,EAAG,CACL,EACIoI,EAAa,CACfrI,EAAG,EACHC,EAAG,CACL,EAOIqI,EAAc,CAChBtI,EAAG,EACHC,EAAG,CACL,EA4CIiB,GA3CmC,KAAA,IAA5BO,EAAU8G,eACf9G,EAAU8G,gBACRC,EAAS/G,EAAU8G,cAAcxI,SACjC0I,EAAkB3H,EAAOC,IAAIyH,EAAQP,EAAQlI,QAAQ,EACzDuI,EAAcxH,EAAO+B,KAAK/B,EAAOG,UAAUwH,CAAe,EAtD3C,EAsD4D,GAK/EP,EAASlG,QAAQ,SAAU0G,GACzB,IACMC,EADFD,EAAapH,KAAO2G,EAAQ3G,MAC1BqH,EAAI7H,EAAOE,UAAUF,EAAOC,IAAIkH,EAAQlI,SAAU2I,EAAa3I,QAAQ,CAAC,GA3D1D,OA+DhBoI,EAAYrH,EAAO4B,IAAIyF,EAAWO,EAAaE,QAAQ,GAIrDD,EAnEc,OAoEhBP,EAAWtH,EAAO4B,IAAI0F,EAAUM,EAAa3I,QAAQ,GAInD4I,EAAIV,EAAQzE,MAAQkF,EAAalF,SAC/BqF,EAAO/H,EAAOC,IAAIkH,EAAQlI,SAAU2I,EAAa3I,QAAQ,EAC7DsI,EAAavH,EAAO4B,IAAI2F,EAAYvH,EAAOkC,IAAI6F,EAAMF,EAAIA,CAAC,CAAC,EAGjE,CAAC,EAGqB,EAAlBT,EAAShJ,SACXiJ,EAAYrH,EAAOkC,IAAImF,EAAWD,EAAShJ,OAAS,CAAC,EACrDkJ,EAAWtH,EAAOkC,IAAIoF,EAAUF,EAAShJ,OAAS,CAAC,EACnDkJ,EAAWtH,EAAOC,IAAIqH,EAAUH,EAAQlI,QAAQ,EAChDsI,EAAavH,EAAOkC,IAAIqF,EAAYH,EAAShJ,OAAS,CAAC,GAEzDiJ,EAAYrH,EAAO+B,KAAK/B,EAAOG,UAAUkH,CAAS,EAzF9B,EAyFgD,EACpEC,EAAWtH,EAAO+B,KAAK/B,EAAOG,UAAUmH,CAAQ,EAzF7B,EAyF8C,EACjEC,EAAavH,EAAO+B,KAAK/B,EAAOG,UAAUoH,CAAU,EAzF/B,GAyFkD,EAG3DvH,EAAO4B,IAAI5B,EAAO4B,IAAI5B,EAAO4B,IAAIyF,EAAWC,CAAQ,EAAGC,CAAU,EAAGC,CAAW,GAEvFQ,EAAchI,EAAO4B,IAAIuF,EAAQlI,SAAUe,EAAO+B,KAAK3B,EAAO,CAAC,CAAC,EACpE4H,EAAYnF,EAAI,EAChBpE,EAAKoI,aAAa,CAChBrG,GAAI2G,EAAQ3G,GACZvB,SAAU+I,CACZ,CAAC,CACH,CAAC,EACMrJ,CACT,EAGA,IAAIqB,EAAS,CACX4B,IAAK,SAAaC,EAAIC,GACpB,MAAO,CACL5C,EAAG2C,EAAG3C,EAAI4C,EAAG5C,EACbC,EAAG0C,EAAG1C,EAAI2C,EAAG3C,CACf,CACF,EACAc,IAAK,SAAa4B,EAAIC,GACpB,MAAO,CACL5C,EAAG2C,EAAG3C,EAAI4C,EAAG5C,EACbC,EAAG0C,EAAG1C,EAAI2C,EAAG3C,CACf,CACF,EACA4C,KAAM,SAAcC,EAAGC,GACrB,MAAO,CACL/C,EAAG8C,EAAE9C,EAAI+C,EACT9C,EAAG6C,EAAE7C,EAAI8C,CACX,CACF,EACAC,IAAK,SAAaF,EAAGC,GACnB,MAAO,CACL/C,EAAG8C,EAAE9C,EAAI+C,EACT9C,EAAG6C,EAAE7C,EAAI8C,CACX,CACF,EACA/B,UAAW,SAAmB8B,GAC5B,OAAO3B,KAAK8B,KAAKH,EAAE9C,EAAI8C,EAAE9C,EAAI8C,EAAE7C,EAAI6C,EAAE7C,CAAC,CACxC,EACAgB,UAAW,SAAmB6B,GAC5B,IAAII,EAAMpC,EAAOE,UAAU8B,CAAC,EAC5B,OAAa,EAANI,EAAUpC,EAAOkC,IAAIF,EAAGI,CAAG,EAAI,CACpClD,EAAG,EACHC,EAAG,CACL,CACF,CACF,CAEA,EAAE,IAAI8I,EAAE,CAAC,SAASpK,EAAQf,EAAOD,GACjC,aAEAyB,OAAOC,eAAe1B,EAAS,aAAc,CAC3C2B,MAAO,CAAA,CACT,CAAC,EACD3B,EAAiB,QAAI,KAAA,EACrB,IAAIqL,EAASC,EAAuBtK,EAAQ,YAAY,CAAC,EACrDuK,EAASD,EAAuBtK,EAAQ,YAAY,CAAC,EACrDwK,EAAcF,EAAuBtK,EAAQ,mBAAmB,CAAC,EACjEyK,EAAQH,EAAuBtK,EAAQ,WAAW,CAAC,EACnD0K,EAAQJ,EAAuBtK,EAAQ,WAAW,CAAC,EACnD2K,EAAaL,EAAuBtK,EAAQ,gBAAgB,CAAC,EAC7D4K,EAAWN,EAAuBtK,EAAQ,cAAc,CAAC,EAC7D,SAASsK,EAAuB5D,GAAO,OAAOA,GAAOA,EAAImE,WAAanE,EAAM,CAAEoE,QAAWpE,CAAI,CAAG,CAChG,IAAIqE,EAAS,GACbA,EAAOC,MAAQX,EAAgB,QAC/BU,EAAOE,MAAQV,EAAgB,QAC/BQ,EAAOG,UAAYP,EAAoB,QACvCI,EAAOI,KAAOT,EAAe,QAC7BK,EAAOK,WAAaZ,EAAqB,QACzCO,EAAO1F,KAAOoF,EAAe,QAC7BM,EAAOzB,QAAUsB,EAAkB,QACpB5L,EAAiB,QAAI+L,CAEpC,EAAE,CAACM,iBAAiB,EAAEC,aAAa,EAAEC,YAAY,EAAEC,aAAa,EAAEC,oBAAoB,EAAEC,eAAe,EAAEC,YAAY,CAAC,GAAGC,EAAE,CAAC,SAAS5L,EAAQf,EAAOD,GACpJ,aAEAyB,OAAOC,eAAe1B,EAAS,aAAc,CAC3C2B,MAAO,CAAA,CACT,CAAC,EACD3B,EAAiB,QACjB,SAAc4B,GAEZA,EAAKW,aAAa,CAChBC,KAAM,OACNqK,MAAO,SACPhH,MAAO,GACPC,OAAQ,GACRC,MAAO,GACPrD,SAAU,CAAA,EACVN,SAAU,CACRC,EAAG,EACHC,EAAG,EACH0D,EAAG,CACL,CACF,CAAC,EACWpE,EAAKG,YAAY,EACvB6B,aAAa,oBAAqB,SAAUC,EAAQC,GACxD,GAAoB,cAAhBD,EAAOrB,MAAwC,UAAhBqB,EAAOY,KACxC,MAA0B,SAAtBZ,EAAOe,MAAMpC,MAGS,SAAtBqB,EAAOgB,MAAMrC,MAAjB,KAAA,CAIJ,CAAC,EAGDZ,EAAKI,GAAG,cAAe,SAAU6B,GACX,SAAhBA,EAAOrB,MACTZ,EAAK8E,SAAS7C,EAAOY,IAAI,EAEP,SAAhBZ,EAAOrB,MACTZ,EAAKkL,SAASjJ,EAAOY,IAAI,CAE7B,CAAC,CACH,CAEA,EAAE,GAAG,EAAE,GAAG,CAAC,EAAE,EAAE,CAAC,CAChB,CAAC"}